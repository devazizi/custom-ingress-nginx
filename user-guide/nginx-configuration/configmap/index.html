<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/ rel=canonical><link href=../annotations-risk/ rel=prev><link href=../custom-template/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.16"><title>ConfigMap - Ingress-Nginx Controller</title><link rel=stylesheet href=../../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#configmaps class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Ingress-Nginx Controller" class="md-header__button md-logo" aria-label="Ingress-Nginx Controller" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Ingress-Nginx Controller </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> ConfigMap </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/kubernetes/ingress-nginx title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> kubernetes/ingress-nginx </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Welcome </a> </li> <li class=md-tabs__item> <a href=../../../deploy/ class=md-tabs__link> Deployment </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../examples/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../../developer-guide/getting-started/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../../faq/ class=md-tabs__link> FAQ </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Ingress-Nginx Controller" class="md-nav__button md-logo" aria-label="Ingress-Nginx Controller" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Ingress-Nginx Controller </label> <div class=md-nav__source> <a href=https://github.com/kubernetes/ingress-nginx title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> kubernetes/ingress-nginx </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Welcome </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Welcome </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Welcome </span> </a> </li> <li class=md-nav__item> <a href=../../../how-it-works/ class=md-nav__link> <span class=md-ellipsis> How it works </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../../../kubectl-plugin/ class=md-nav__link> <span class=md-ellipsis> kubectl plugin </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deploy/ class=md-nav__link> <span class=md-ellipsis> Installation Guide </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/baremetal/ class=md-nav__link> <span class=md-ellipsis> Bare-metal considerations </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/rbac/ class=md-nav__link> <span class=md-ellipsis> Role Based Access Control (RBAC) </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/upgrade/ class=md-nav__link> <span class=md-ellipsis> Upgrade </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/hardening-guide/ class=md-nav__link> <span class=md-ellipsis> Hardening guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex> <span class=md-ellipsis> NGINX Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> NGINX Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../basic-usage/ class=md-nav__link> <span class=md-ellipsis> Basic usage </span> </a> </li> <li class=md-nav__item> <a href=../annotations/ class=md-nav__link> <span class=md-ellipsis> Annotations </span> </a> </li> <li class=md-nav__item> <a href=../annotations-risk/ class=md-nav__link> <span class=md-ellipsis> Annotations Risks </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> ConfigMap </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> ConfigMap </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#configuration-options class=md-nav__link> <span class=md-ellipsis> Configuration options </span> </a> </li> <li class=md-nav__item> <a href=#add-headers class=md-nav__link> <span class=md-ellipsis> add-headers </span> </a> </li> <li class=md-nav__item> <a href=#allow-backend-server-header class=md-nav__link> <span class=md-ellipsis> allow-backend-server-header </span> </a> </li> <li class=md-nav__item> <a href=#allow-cross-namespace-resources class=md-nav__link> <span class=md-ellipsis> allow-cross-namespace-resources </span> </a> </li> <li class=md-nav__item> <a href=#allow-snippet-annotations class=md-nav__link> <span class=md-ellipsis> allow-snippet-annotations </span> </a> </li> <li class=md-nav__item> <a href=#annotations-risk-level class=md-nav__link> <span class=md-ellipsis> annotations-risk-level </span> </a> </li> <li class=md-nav__item> <a href=#annotation-value-word-blocklist class=md-nav__link> <span class=md-ellipsis> annotation-value-word-blocklist </span> </a> </li> <li class=md-nav__item> <a href=#hide-headers class=md-nav__link> <span class=md-ellipsis> hide-headers </span> </a> </li> <li class=md-nav__item> <a href=#access-log-params class=md-nav__link> <span class=md-ellipsis> access-log-params </span> </a> </li> <li class=md-nav__item> <a href=#access-log-path class=md-nav__link> <span class=md-ellipsis> access-log-path </span> </a> </li> <li class=md-nav__item> <a href=#http-access-log-path class=md-nav__link> <span class=md-ellipsis> http-access-log-path </span> </a> </li> <li class=md-nav__item> <a href=#stream-access-log-path class=md-nav__link> <span class=md-ellipsis> stream-access-log-path </span> </a> </li> <li class=md-nav__item> <a href=#enable-access-log-for-default-backend class=md-nav__link> <span class=md-ellipsis> enable-access-log-for-default-backend </span> </a> </li> <li class=md-nav__item> <a href=#error-log-path class=md-nav__link> <span class=md-ellipsis> error-log-path </span> </a> </li> <li class=md-nav__item> <a href=#enable-modsecurity class=md-nav__link> <span class=md-ellipsis> enable-modsecurity </span> </a> </li> <li class=md-nav__item> <a href=#enable-owasp-modsecurity-crs class=md-nav__link> <span class=md-ellipsis> enable-owasp-modsecurity-crs </span> </a> </li> <li class=md-nav__item> <a href=#modsecurity-snippet class=md-nav__link> <span class=md-ellipsis> modsecurity-snippet </span> </a> </li> <li class=md-nav__item> <a href=#client-header-buffer-size class=md-nav__link> <span class=md-ellipsis> client-header-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#client-header-timeout class=md-nav__link> <span class=md-ellipsis> client-header-timeout </span> </a> </li> <li class=md-nav__item> <a href=#client-body-buffer-size class=md-nav__link> <span class=md-ellipsis> client-body-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#client-body-timeout class=md-nav__link> <span class=md-ellipsis> client-body-timeout </span> </a> </li> <li class=md-nav__item> <a href=#disable-access-log class=md-nav__link> <span class=md-ellipsis> disable-access-log </span> </a> </li> <li class=md-nav__item> <a href=#disable-ipv6 class=md-nav__link> <span class=md-ellipsis> disable-ipv6 </span> </a> </li> <li class=md-nav__item> <a href=#disable-ipv6-dns class=md-nav__link> <span class=md-ellipsis> disable-ipv6-dns </span> </a> </li> <li class=md-nav__item> <a href=#enable-underscores-in-headers class=md-nav__link> <span class=md-ellipsis> enable-underscores-in-headers </span> </a> </li> <li class=md-nav__item> <a href=#enable-ocsp class=md-nav__link> <span class=md-ellipsis> enable-ocsp </span> </a> </li> <li class=md-nav__item> <a href=#ignore-invalid-headers class=md-nav__link> <span class=md-ellipsis> ignore-invalid-headers </span> </a> </li> <li class=md-nav__item> <a href=#retry-non-idempotent class=md-nav__link> <span class=md-ellipsis> retry-non-idempotent </span> </a> </li> <li class=md-nav__item> <a href=#error-log-level class=md-nav__link> <span class=md-ellipsis> error-log-level </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-field-size class=md-nav__link> <span class=md-ellipsis> http2-max-field-size </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-header-size class=md-nav__link> <span class=md-ellipsis> http2-max-header-size </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-requests class=md-nav__link> <span class=md-ellipsis> http2-max-requests </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-concurrent-streams class=md-nav__link> <span class=md-ellipsis> http2-max-concurrent-streams </span> </a> </li> <li class=md-nav__item> <a href=#hsts class=md-nav__link> <span class=md-ellipsis> hsts </span> </a> </li> <li class=md-nav__item> <a href=#hsts-include-subdomains class=md-nav__link> <span class=md-ellipsis> hsts-include-subdomains </span> </a> </li> <li class=md-nav__item> <a href=#hsts-max-age class=md-nav__link> <span class=md-ellipsis> hsts-max-age </span> </a> </li> <li class=md-nav__item> <a href=#hsts-preload class=md-nav__link> <span class=md-ellipsis> hsts-preload </span> </a> </li> <li class=md-nav__item> <a href=#keep-alive class=md-nav__link> <span class=md-ellipsis> keep-alive </span> </a> </li> <li class=md-nav__item> <a href=#keep-alive-requests class=md-nav__link> <span class=md-ellipsis> keep-alive-requests </span> </a> </li> <li class=md-nav__item> <a href=#large-client-header-buffers class=md-nav__link> <span class=md-ellipsis> large-client-header-buffers </span> </a> </li> <li class=md-nav__item> <a href=#log-format-escape-none class=md-nav__link> <span class=md-ellipsis> log-format-escape-none </span> </a> </li> <li class=md-nav__item> <a href=#log-format-escape-json class=md-nav__link> <span class=md-ellipsis> log-format-escape-json </span> </a> </li> <li class=md-nav__item> <a href=#log-format-upstream class=md-nav__link> <span class=md-ellipsis> log-format-upstream </span> </a> </li> <li class=md-nav__item> <a href=#log-format-stream class=md-nav__link> <span class=md-ellipsis> log-format-stream </span> </a> </li> <li class=md-nav__item> <a href=#enable-multi-accept class=md-nav__link> <span class=md-ellipsis> enable-multi-accept </span> </a> </li> <li class=md-nav__item> <a href=#max-worker-connections class=md-nav__link> <span class=md-ellipsis> max-worker-connections </span> </a> </li> <li class=md-nav__item> <a href=#max-worker-open-files class=md-nav__link> <span class=md-ellipsis> max-worker-open-files </span> </a> </li> <li class=md-nav__item> <a href=#map-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> map-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-real-ip-cidr class=md-nav__link> <span class=md-ellipsis> proxy-real-ip-cidr </span> </a> </li> <li class=md-nav__item> <a href=#proxy-set-headers class=md-nav__link> <span class=md-ellipsis> proxy-set-headers </span> </a> </li> <li class=md-nav__item> <a href=#server-name-hash-max-size class=md-nav__link> <span class=md-ellipsis> server-name-hash-max-size </span> </a> </li> <li class=md-nav__item> <a href=#server-name-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> server-name-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-headers-hash-max-size class=md-nav__link> <span class=md-ellipsis> proxy-headers-hash-max-size </span> </a> </li> <li class=md-nav__item> <a href=#reuse-port class=md-nav__link> <span class=md-ellipsis> reuse-port </span> </a> </li> <li class=md-nav__item> <a href=#proxy-headers-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> proxy-headers-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#server-tokens class=md-nav__link> <span class=md-ellipsis> server-tokens </span> </a> </li> <li class=md-nav__item> <a href=#ssl-ciphers class=md-nav__link> <span class=md-ellipsis> ssl-ciphers </span> </a> </li> <li class=md-nav__item> <a href=#ssl-ecdh-curve class=md-nav__link> <span class=md-ellipsis> ssl-ecdh-curve </span> </a> </li> <li class=md-nav__item> <a href=#ssl-dh-param class=md-nav__link> <span class=md-ellipsis> ssl-dh-param </span> </a> </li> <li class=md-nav__item> <a href=#ssl-protocols class=md-nav__link> <span class=md-ellipsis> ssl-protocols </span> </a> </li> <li class=md-nav__item> <a href=#ssl-early-data class=md-nav__link> <span class=md-ellipsis> ssl-early-data </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-cache class=md-nav__link> <span class=md-ellipsis> ssl-session-cache </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-cache-size class=md-nav__link> <span class=md-ellipsis> ssl-session-cache-size </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-tickets class=md-nav__link> <span class=md-ellipsis> ssl-session-tickets </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-ticket-key class=md-nav__link> <span class=md-ellipsis> ssl-session-ticket-key </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-timeout class=md-nav__link> <span class=md-ellipsis> ssl-session-timeout </span> </a> </li> <li class=md-nav__item> <a href=#ssl-buffer-size class=md-nav__link> <span class=md-ellipsis> ssl-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#use-proxy-protocol class=md-nav__link> <span class=md-ellipsis> use-proxy-protocol </span> </a> </li> <li class=md-nav__item> <a href=#proxy-protocol-header-timeout class=md-nav__link> <span class=md-ellipsis> proxy-protocol-header-timeout </span> </a> </li> <li class=md-nav__item> <a href=#enable-aio-write class=md-nav__link> <span class=md-ellipsis> enable-aio-write </span> </a> </li> <li class=md-nav__item> <a href=#use-gzip class=md-nav__link> <span class=md-ellipsis> use-gzip </span> </a> </li> <li class=md-nav__item> <a href=#use-geoip class=md-nav__link> <span class=md-ellipsis> use-geoip </span> </a> </li> <li class=md-nav__item> <a href=#use-geoip2 class=md-nav__link> <span class=md-ellipsis> use-geoip2 </span> </a> </li> <li class=md-nav__item> <a href=#geoip2-autoreload-in-minutes class=md-nav__link> <span class=md-ellipsis> geoip2-autoreload-in-minutes </span> </a> </li> <li class=md-nav__item> <a href=#enable-brotli class=md-nav__link> <span class=md-ellipsis> enable-brotli </span> </a> </li> <li class=md-nav__item> <a href=#brotli-level class=md-nav__link> <span class=md-ellipsis> brotli-level </span> </a> </li> <li class=md-nav__item> <a href=#brotli-min-length class=md-nav__link> <span class=md-ellipsis> brotli-min-length </span> </a> </li> <li class=md-nav__item> <a href=#brotli-types class=md-nav__link> <span class=md-ellipsis> brotli-types </span> </a> </li> <li class=md-nav__item> <a href=#use-http2 class=md-nav__link> <span class=md-ellipsis> use-http2 </span> </a> </li> <li class=md-nav__item> <a href=#gzip-disable class=md-nav__link> <span class=md-ellipsis> gzip-disable </span> </a> </li> <li class=md-nav__item> <a href=#gzip-level class=md-nav__link> <span class=md-ellipsis> gzip-level </span> </a> </li> <li class=md-nav__item> <a href=#gzip-min-length class=md-nav__link> <span class=md-ellipsis> gzip-min-length </span> </a> </li> <li class=md-nav__item> <a href=#gzip-types class=md-nav__link> <span class=md-ellipsis> gzip-types </span> </a> </li> <li class=md-nav__item> <a href=#worker-processes class=md-nav__link> <span class=md-ellipsis> worker-processes </span> </a> </li> <li class=md-nav__item> <a href=#worker-cpu-affinity class=md-nav__link> <span class=md-ellipsis> worker-cpu-affinity </span> </a> </li> <li class=md-nav__item> <a href=#worker-shutdown-timeout class=md-nav__link> <span class=md-ellipsis> worker-shutdown-timeout </span> </a> </li> <li class=md-nav__item> <a href=#load-balance class=md-nav__link> <span class=md-ellipsis> load-balance </span> </a> </li> <li class=md-nav__item> <a href=#variables-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> variables-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#variables-hash-max-size class=md-nav__link> <span class=md-ellipsis> variables-hash-max-size </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-connections class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-connections </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-time class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-time </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-timeout class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-timeout </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-requests class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-requests </span> </a> </li> <li class=md-nav__item> <a href=#limit-conn-zone-variable class=md-nav__link> <span class=md-ellipsis> limit-conn-zone-variable </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-timeout class=md-nav__link> <span class=md-ellipsis> proxy-stream-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-next-upstream class=md-nav__link> <span class=md-ellipsis> proxy-stream-next-upstream </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-next-upstream-timeout class=md-nav__link> <span class=md-ellipsis> proxy-stream-next-upstream-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-next-upstream-tries class=md-nav__link> <span class=md-ellipsis> proxy-stream-next-upstream-tries </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-responses class=md-nav__link> <span class=md-ellipsis> proxy-stream-responses </span> </a> </li> <li class=md-nav__item> <a href=#bind-address class=md-nav__link> <span class=md-ellipsis> bind-address </span> </a> </li> <li class=md-nav__item> <a href=#use-forwarded-headers class=md-nav__link> <span class=md-ellipsis> use-forwarded-headers </span> </a> </li> <li class=md-nav__item> <a href=#enable-real-ip class=md-nav__link> <span class=md-ellipsis> enable-real-ip </span> </a> </li> <li class=md-nav__item> <a href=#forwarded-for-header class=md-nav__link> <span class=md-ellipsis> forwarded-for-header </span> </a> </li> <li class=md-nav__item> <a href=#forwarded-for-proxy-protocol-header class=md-nav__link> <span class=md-ellipsis> forwarded-for-proxy-protocol-header </span> </a> </li> <li class=md-nav__item> <a href=#compute-full-forwarded-for class=md-nav__link> <span class=md-ellipsis> compute-full-forwarded-for </span> </a> </li> <li class=md-nav__item> <a href=#proxy-add-original-uri-header class=md-nav__link> <span class=md-ellipsis> proxy-add-original-uri-header </span> </a> </li> <li class=md-nav__item> <a href=#generate-request-id class=md-nav__link> <span class=md-ellipsis> generate-request-id </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-collector-host class=md-nav__link> <span class=md-ellipsis> jaeger-collector-host </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-collector-port class=md-nav__link> <span class=md-ellipsis> jaeger-collector-port </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-endpoint class=md-nav__link> <span class=md-ellipsis> jaeger-endpoint </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-service-name class=md-nav__link> <span class=md-ellipsis> jaeger-service-name </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-propagation-format class=md-nav__link> <span class=md-ellipsis> jaeger-propagation-format </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-type class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-type </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-param class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-param </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-host class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-host </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-port class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-port </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-trace-context-header-name class=md-nav__link> <span class=md-ellipsis> jaeger-trace-context-header-name </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-debug-header class=md-nav__link> <span class=md-ellipsis> jaeger-debug-header </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-baggage-header class=md-nav__link> <span class=md-ellipsis> jaeger-baggage-header </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-tracer-baggage-header-prefix class=md-nav__link> <span class=md-ellipsis> jaeger-tracer-baggage-header-prefix </span> </a> </li> <li class=md-nav__item> <a href=#enable-opentelemetry class=md-nav__link> <span class=md-ellipsis> enable-opentelemetry </span> </a> </li> <li class=md-nav__item> <a href=#opentelemetry-operation-name class=md-nav__link> <span class=md-ellipsis> opentelemetry-operation-name </span> </a> </li> <li class=md-nav__item> <a href=#opentelemetry-config class=md-nav__link> <span class=md-ellipsis> opentelemetry-config </span> </a> </li> <li class=md-nav__item> <a href=#otlp-collector-host class=md-nav__link> <span class=md-ellipsis> otlp-collector-host </span> </a> </li> <li class=md-nav__item> <a href=#otlp-collector-port class=md-nav__link> <span class=md-ellipsis> otlp-collector-port </span> </a> </li> <li class=md-nav__item> <a href=#otel-service-name class=md-nav__link> <span class=md-ellipsis> otel-service-name </span> </a> </li> <li class=md-nav__item> <a href=#opentelemetry-trust-incoming-span class=md-nav__link> <span class=md-ellipsis> opentelemetry-trust-incoming-span </span> </a> </li> <li class=md-nav__item> <a href=#otel-sampler-parent-based class=md-nav__link> <span class=md-ellipsis> otel-sampler-parent-based </span> </a> </li> <li class=md-nav__item> <a href=#otel-sampler-ratio class=md-nav__link> <span class=md-ellipsis> otel-sampler-ratio </span> </a> </li> <li class=md-nav__item> <a href=#otel-sampler class=md-nav__link> <span class=md-ellipsis> otel-sampler </span> </a> </li> <li class=md-nav__item> <a href=#main-snippet class=md-nav__link> <span class=md-ellipsis> main-snippet </span> </a> </li> <li class=md-nav__item> <a href=#http-snippet class=md-nav__link> <span class=md-ellipsis> http-snippet </span> </a> </li> <li class=md-nav__item> <a href=#server-snippet class=md-nav__link> <span class=md-ellipsis> server-snippet </span> </a> </li> <li class=md-nav__item> <a href=#stream-snippet class=md-nav__link> <span class=md-ellipsis> stream-snippet </span> </a> </li> <li class=md-nav__item> <a href=#location-snippet class=md-nav__link> <span class=md-ellipsis> location-snippet </span> </a> </li> <li class=md-nav__item> <a href=#custom-http-errors class=md-nav__link> <span class=md-ellipsis> custom-http-errors </span> </a> </li> <li class=md-nav__item> <a href=#proxy-body-size class=md-nav__link> <span class=md-ellipsis> proxy-body-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-connect-timeout class=md-nav__link> <span class=md-ellipsis> proxy-connect-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-read-timeout class=md-nav__link> <span class=md-ellipsis> proxy-read-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-send-timeout class=md-nav__link> <span class=md-ellipsis> proxy-send-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-buffers-number class=md-nav__link> <span class=md-ellipsis> proxy-buffers-number </span> </a> </li> <li class=md-nav__item> <a href=#proxy-buffer-size class=md-nav__link> <span class=md-ellipsis> proxy-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-busy-buffers-size class=md-nav__link> <span class=md-ellipsis> proxy-busy-buffers-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-cookie-path class=md-nav__link> <span class=md-ellipsis> proxy-cookie-path </span> </a> </li> <li class=md-nav__item> <a href=#proxy-cookie-domain class=md-nav__link> <span class=md-ellipsis> proxy-cookie-domain </span> </a> </li> <li class=md-nav__item> <a href=#proxy-next-upstream class=md-nav__link> <span class=md-ellipsis> proxy-next-upstream </span> </a> </li> <li class=md-nav__item> <a href=#proxy-next-upstream-timeout class=md-nav__link> <span class=md-ellipsis> proxy-next-upstream-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-next-upstream-tries class=md-nav__link> <span class=md-ellipsis> proxy-next-upstream-tries </span> </a> </li> <li class=md-nav__item> <a href=#proxy-redirect-from class=md-nav__link> <span class=md-ellipsis> proxy-redirect-from </span> </a> </li> <li class=md-nav__item> <a href=#proxy-request-buffering class=md-nav__link> <span class=md-ellipsis> proxy-request-buffering </span> </a> </li> <li class=md-nav__item> <a href=#ssl-redirect class=md-nav__link> <span class=md-ellipsis> ssl-redirect </span> </a> </li> <li class=md-nav__item> <a href=#force-ssl-redirect class=md-nav__link> <span class=md-ellipsis> force-ssl-redirect </span> </a> </li> <li class=md-nav__item> <a href=#denylist-source-range class=md-nav__link> <span class=md-ellipsis> denylist-source-range </span> </a> </li> <li class=md-nav__item> <a href=#whitelist-source-range class=md-nav__link> <span class=md-ellipsis> whitelist-source-range </span> </a> </li> <li class=md-nav__item> <a href=#skip-access-log-urls class=md-nav__link> <span class=md-ellipsis> skip-access-log-urls </span> </a> </li> <li class=md-nav__item> <a href=#limit-rate class=md-nav__link> <span class=md-ellipsis> limit-rate </span> </a> </li> <li class=md-nav__item> <a href=#limit-rate-after class=md-nav__link> <span class=md-ellipsis> limit-rate-after </span> </a> </li> <li class=md-nav__item> <a href=#lua-shared-dicts class=md-nav__link> <span class=md-ellipsis> lua-shared-dicts </span> </a> </li> <li class=md-nav__item> <a href=#http-redirect-code class=md-nav__link> <span class=md-ellipsis> http-redirect-code </span> </a> </li> <li class=md-nav__item> <a href=#proxy-buffering class=md-nav__link> <span class=md-ellipsis> proxy-buffering </span> </a> </li> <li class=md-nav__item> <a href=#limit-req-status-code class=md-nav__link> <span class=md-ellipsis> limit-req-status-code </span> </a> </li> <li class=md-nav__item> <a href=#limit-conn-status-code class=md-nav__link> <span class=md-ellipsis> limit-conn-status-code </span> </a> </li> <li class=md-nav__item> <a href=#enable-syslog class=md-nav__link> <span class=md-ellipsis> enable-syslog </span> </a> </li> <li class=md-nav__item> <a href=#syslog-host class=md-nav__link> <span class=md-ellipsis> syslog-host </span> </a> </li> <li class=md-nav__item> <a href=#syslog-port class=md-nav__link> <span class=md-ellipsis> syslog-port </span> </a> </li> <li class=md-nav__item> <a href=#no-tls-redirect-locations class=md-nav__link> <span class=md-ellipsis> no-tls-redirect-locations </span> </a> </li> <li class=md-nav__item> <a href=#global-allowed-response-headers class=md-nav__link> <span class=md-ellipsis> global-allowed-response-headers </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-url class=md-nav__link> <span class=md-ellipsis> global-auth-url </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-method class=md-nav__link> <span class=md-ellipsis> global-auth-method </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-signin class=md-nav__link> <span class=md-ellipsis> global-auth-signin </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-signin-redirect-param class=md-nav__link> <span class=md-ellipsis> global-auth-signin-redirect-param </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-response-headers class=md-nav__link> <span class=md-ellipsis> global-auth-response-headers </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-request-redirect class=md-nav__link> <span class=md-ellipsis> global-auth-request-redirect </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-snippet class=md-nav__link> <span class=md-ellipsis> global-auth-snippet </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-cache-key class=md-nav__link> <span class=md-ellipsis> global-auth-cache-key </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-cache-duration class=md-nav__link> <span class=md-ellipsis> global-auth-cache-duration </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-always-set-cookie class=md-nav__link> <span class=md-ellipsis> global-auth-always-set-cookie </span> </a> </li> <li class=md-nav__item> <a href=#no-auth-locations class=md-nav__link> <span class=md-ellipsis> no-auth-locations </span> </a> </li> <li class=md-nav__item> <a href=#block-cidrs class=md-nav__link> <span class=md-ellipsis> block-cidrs </span> </a> </li> <li class=md-nav__item> <a href=#block-user-agents class=md-nav__link> <span class=md-ellipsis> block-user-agents </span> </a> </li> <li class=md-nav__item> <a href=#block-referers class=md-nav__link> <span class=md-ellipsis> block-referers </span> </a> </li> <li class=md-nav__item> <a href=#proxy-ssl-location-only class=md-nav__link> <span class=md-ellipsis> proxy-ssl-location-only </span> </a> </li> <li class=md-nav__item> <a href=#default-type class=md-nav__link> <span class=md-ellipsis> default-type </span> </a> </li> <li class=md-nav__item> <a href=#service-upstream class=md-nav__link> <span class=md-ellipsis> service-upstream </span> </a> </li> <li class=md-nav__item> <a href=#ssl-reject-handshake class=md-nav__link> <span class=md-ellipsis> ssl-reject-handshake </span> </a> </li> <li class=md-nav__item> <a href=#debug-connections class=md-nav__link> <span class=md-ellipsis> debug-connections </span> </a> </li> <li class=md-nav__item> <a href=#strict-validate-path-type class=md-nav__link> <span class=md-ellipsis> strict-validate-path-type </span> </a> </li> <li class=md-nav__item> <a href=#grpc-buffer-size-kb class=md-nav__link> <span class=md-ellipsis> grpc-buffer-size-kb </span> </a> </li> <li class=md-nav__item> <a href=#relative-redirects class=md-nav__link> <span class=md-ellipsis> relative-redirects </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../custom-template/ class=md-nav__link> <span class=md-ellipsis> Custom NGINX template </span> </a> </li> <li class=md-nav__item> <a href=../log-format/ class=md-nav__link> <span class=md-ellipsis> Log format </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../cli-arguments/ class=md-nav__link> <span class=md-ellipsis> Command line arguments </span> </a> </li> <li class=md-nav__item> <a href=../../custom-errors/ class=md-nav__link> <span class=md-ellipsis> Custom errors </span> </a> </li> <li class=md-nav__item> <a href=../../default-backend/ class=md-nav__link> <span class=md-ellipsis> Default backend </span> </a> </li> <li class=md-nav__item> <a href=../../exposing-tcp-udp-services/ class=md-nav__link> <span class=md-ellipsis> Exposing TCP and UDP services </span> </a> </li> <li class=md-nav__item> <a href=../../fcgi-services/ class=md-nav__link> <span class=md-ellipsis> Exposing FCGI services </span> </a> </li> <li class=md-nav__item> <a href=../../ingress-path-matching/ class=md-nav__link> <span class=md-ellipsis> Regular expressions in paths </span> </a> </li> <li class=md-nav__item> <a href=../../external-articles/ class=md-nav__link> <span class=md-ellipsis> External Articles </span> </a> </li> <li class=md-nav__item> <a href=../../miscellaneous/ class=md-nav__link> <span class=md-ellipsis> Miscellaneous </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/ class=md-nav__link> <span class=md-ellipsis> Prometheus and Grafana installation </span> </a> </li> <li class=md-nav__item> <a href=../../multiple-ingress/ class=md-nav__link> <span class=md-ellipsis> Multiple Ingress controllers </span> </a> </li> <li class=md-nav__item> <a href=../../tls/ class=md-nav__link> <span class=md-ellipsis> TLS/HTTPS </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_13> <label class=md-nav__link for=__nav_3_13 id=__nav_3_13_label tabindex> <span class=md-ellipsis> Third party addons </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_13_label aria-expanded=false> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> Third party addons </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../third-party-addons/modsecurity/ class=md-nav__link> <span class=md-ellipsis> ModSecurity Web Application Firewall </span> </a> </li> <li class=md-nav__item> <a href=../../third-party-addons/opentelemetry/ class=md-nav__link> <span class=md-ellipsis> OpenTelemetry </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../examples/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/PREREQUISITES/ class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/affinity/cookie/ class=md-nav__link> <span class=md-ellipsis> Sticky Sessions </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Auth </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Auth </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../examples/auth/basic/ class=md-nav__link> <span class=md-ellipsis> Basic Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/auth/client-certs/ class=md-nav__link> <span class=md-ellipsis> Client Certificate Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/auth/external-auth/ class=md-nav__link> <span class=md-ellipsis> External Basic Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/auth/oauth-external-auth/ class=md-nav__link> <span class=md-ellipsis> External OAUTH Authentication </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class=md-ellipsis> Customization </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Customization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../examples/customization/configuration-snippets/ class=md-nav__link> <span class=md-ellipsis> Configuration Snippets </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/customization/custom-configuration/ class=md-nav__link> <span class=md-ellipsis> Custom Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/customization/custom-errors/ class=md-nav__link> <span class=md-ellipsis> Custom Errors </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/customization/custom-headers/ class=md-nav__link> <span class=md-ellipsis> Custom Headers </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/customization/external-auth-headers/ class=md-nav__link> <span class=md-ellipsis> External authentication </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/customization/ssl-dh-param/ class=md-nav__link> <span class=md-ellipsis> Custom DH parameters for perfect forward secrecy </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/customization/sysctl/ class=md-nav__link> <span class=md-ellipsis> Sysctl tuning </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../examples/docker-registry/ class=md-nav__link> <span class=md-ellipsis> Docker registry </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/grpc/ class=md-nav__link> <span class=md-ellipsis> gRPC </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/multi-tls/ class=md-nav__link> <span class=md-ellipsis> Multi TLS certificate termination </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/rewrite/ class=md-nav__link> <span class=md-ellipsis> Rewrite </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/static-ip/ class=md-nav__link> <span class=md-ellipsis> Static IPs </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/tls-termination/ class=md-nav__link> <span class=md-ellipsis> TLS termination </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/openpolicyagent/ class=md-nav__link> <span class=md-ellipsis> Open Policy Agent rules </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/canary/ class=md-nav__link> <span class=md-ellipsis> Canary Deployments </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../developer-guide/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../../developer-guide/code-overview/ class=md-nav__link> <span class=md-ellipsis> Code Overview </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#configuration-options class=md-nav__link> <span class=md-ellipsis> Configuration options </span> </a> </li> <li class=md-nav__item> <a href=#add-headers class=md-nav__link> <span class=md-ellipsis> add-headers </span> </a> </li> <li class=md-nav__item> <a href=#allow-backend-server-header class=md-nav__link> <span class=md-ellipsis> allow-backend-server-header </span> </a> </li> <li class=md-nav__item> <a href=#allow-cross-namespace-resources class=md-nav__link> <span class=md-ellipsis> allow-cross-namespace-resources </span> </a> </li> <li class=md-nav__item> <a href=#allow-snippet-annotations class=md-nav__link> <span class=md-ellipsis> allow-snippet-annotations </span> </a> </li> <li class=md-nav__item> <a href=#annotations-risk-level class=md-nav__link> <span class=md-ellipsis> annotations-risk-level </span> </a> </li> <li class=md-nav__item> <a href=#annotation-value-word-blocklist class=md-nav__link> <span class=md-ellipsis> annotation-value-word-blocklist </span> </a> </li> <li class=md-nav__item> <a href=#hide-headers class=md-nav__link> <span class=md-ellipsis> hide-headers </span> </a> </li> <li class=md-nav__item> <a href=#access-log-params class=md-nav__link> <span class=md-ellipsis> access-log-params </span> </a> </li> <li class=md-nav__item> <a href=#access-log-path class=md-nav__link> <span class=md-ellipsis> access-log-path </span> </a> </li> <li class=md-nav__item> <a href=#http-access-log-path class=md-nav__link> <span class=md-ellipsis> http-access-log-path </span> </a> </li> <li class=md-nav__item> <a href=#stream-access-log-path class=md-nav__link> <span class=md-ellipsis> stream-access-log-path </span> </a> </li> <li class=md-nav__item> <a href=#enable-access-log-for-default-backend class=md-nav__link> <span class=md-ellipsis> enable-access-log-for-default-backend </span> </a> </li> <li class=md-nav__item> <a href=#error-log-path class=md-nav__link> <span class=md-ellipsis> error-log-path </span> </a> </li> <li class=md-nav__item> <a href=#enable-modsecurity class=md-nav__link> <span class=md-ellipsis> enable-modsecurity </span> </a> </li> <li class=md-nav__item> <a href=#enable-owasp-modsecurity-crs class=md-nav__link> <span class=md-ellipsis> enable-owasp-modsecurity-crs </span> </a> </li> <li class=md-nav__item> <a href=#modsecurity-snippet class=md-nav__link> <span class=md-ellipsis> modsecurity-snippet </span> </a> </li> <li class=md-nav__item> <a href=#client-header-buffer-size class=md-nav__link> <span class=md-ellipsis> client-header-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#client-header-timeout class=md-nav__link> <span class=md-ellipsis> client-header-timeout </span> </a> </li> <li class=md-nav__item> <a href=#client-body-buffer-size class=md-nav__link> <span class=md-ellipsis> client-body-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#client-body-timeout class=md-nav__link> <span class=md-ellipsis> client-body-timeout </span> </a> </li> <li class=md-nav__item> <a href=#disable-access-log class=md-nav__link> <span class=md-ellipsis> disable-access-log </span> </a> </li> <li class=md-nav__item> <a href=#disable-ipv6 class=md-nav__link> <span class=md-ellipsis> disable-ipv6 </span> </a> </li> <li class=md-nav__item> <a href=#disable-ipv6-dns class=md-nav__link> <span class=md-ellipsis> disable-ipv6-dns </span> </a> </li> <li class=md-nav__item> <a href=#enable-underscores-in-headers class=md-nav__link> <span class=md-ellipsis> enable-underscores-in-headers </span> </a> </li> <li class=md-nav__item> <a href=#enable-ocsp class=md-nav__link> <span class=md-ellipsis> enable-ocsp </span> </a> </li> <li class=md-nav__item> <a href=#ignore-invalid-headers class=md-nav__link> <span class=md-ellipsis> ignore-invalid-headers </span> </a> </li> <li class=md-nav__item> <a href=#retry-non-idempotent class=md-nav__link> <span class=md-ellipsis> retry-non-idempotent </span> </a> </li> <li class=md-nav__item> <a href=#error-log-level class=md-nav__link> <span class=md-ellipsis> error-log-level </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-field-size class=md-nav__link> <span class=md-ellipsis> http2-max-field-size </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-header-size class=md-nav__link> <span class=md-ellipsis> http2-max-header-size </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-requests class=md-nav__link> <span class=md-ellipsis> http2-max-requests </span> </a> </li> <li class=md-nav__item> <a href=#http2-max-concurrent-streams class=md-nav__link> <span class=md-ellipsis> http2-max-concurrent-streams </span> </a> </li> <li class=md-nav__item> <a href=#hsts class=md-nav__link> <span class=md-ellipsis> hsts </span> </a> </li> <li class=md-nav__item> <a href=#hsts-include-subdomains class=md-nav__link> <span class=md-ellipsis> hsts-include-subdomains </span> </a> </li> <li class=md-nav__item> <a href=#hsts-max-age class=md-nav__link> <span class=md-ellipsis> hsts-max-age </span> </a> </li> <li class=md-nav__item> <a href=#hsts-preload class=md-nav__link> <span class=md-ellipsis> hsts-preload </span> </a> </li> <li class=md-nav__item> <a href=#keep-alive class=md-nav__link> <span class=md-ellipsis> keep-alive </span> </a> </li> <li class=md-nav__item> <a href=#keep-alive-requests class=md-nav__link> <span class=md-ellipsis> keep-alive-requests </span> </a> </li> <li class=md-nav__item> <a href=#large-client-header-buffers class=md-nav__link> <span class=md-ellipsis> large-client-header-buffers </span> </a> </li> <li class=md-nav__item> <a href=#log-format-escape-none class=md-nav__link> <span class=md-ellipsis> log-format-escape-none </span> </a> </li> <li class=md-nav__item> <a href=#log-format-escape-json class=md-nav__link> <span class=md-ellipsis> log-format-escape-json </span> </a> </li> <li class=md-nav__item> <a href=#log-format-upstream class=md-nav__link> <span class=md-ellipsis> log-format-upstream </span> </a> </li> <li class=md-nav__item> <a href=#log-format-stream class=md-nav__link> <span class=md-ellipsis> log-format-stream </span> </a> </li> <li class=md-nav__item> <a href=#enable-multi-accept class=md-nav__link> <span class=md-ellipsis> enable-multi-accept </span> </a> </li> <li class=md-nav__item> <a href=#max-worker-connections class=md-nav__link> <span class=md-ellipsis> max-worker-connections </span> </a> </li> <li class=md-nav__item> <a href=#max-worker-open-files class=md-nav__link> <span class=md-ellipsis> max-worker-open-files </span> </a> </li> <li class=md-nav__item> <a href=#map-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> map-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-real-ip-cidr class=md-nav__link> <span class=md-ellipsis> proxy-real-ip-cidr </span> </a> </li> <li class=md-nav__item> <a href=#proxy-set-headers class=md-nav__link> <span class=md-ellipsis> proxy-set-headers </span> </a> </li> <li class=md-nav__item> <a href=#server-name-hash-max-size class=md-nav__link> <span class=md-ellipsis> server-name-hash-max-size </span> </a> </li> <li class=md-nav__item> <a href=#server-name-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> server-name-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-headers-hash-max-size class=md-nav__link> <span class=md-ellipsis> proxy-headers-hash-max-size </span> </a> </li> <li class=md-nav__item> <a href=#reuse-port class=md-nav__link> <span class=md-ellipsis> reuse-port </span> </a> </li> <li class=md-nav__item> <a href=#proxy-headers-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> proxy-headers-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#server-tokens class=md-nav__link> <span class=md-ellipsis> server-tokens </span> </a> </li> <li class=md-nav__item> <a href=#ssl-ciphers class=md-nav__link> <span class=md-ellipsis> ssl-ciphers </span> </a> </li> <li class=md-nav__item> <a href=#ssl-ecdh-curve class=md-nav__link> <span class=md-ellipsis> ssl-ecdh-curve </span> </a> </li> <li class=md-nav__item> <a href=#ssl-dh-param class=md-nav__link> <span class=md-ellipsis> ssl-dh-param </span> </a> </li> <li class=md-nav__item> <a href=#ssl-protocols class=md-nav__link> <span class=md-ellipsis> ssl-protocols </span> </a> </li> <li class=md-nav__item> <a href=#ssl-early-data class=md-nav__link> <span class=md-ellipsis> ssl-early-data </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-cache class=md-nav__link> <span class=md-ellipsis> ssl-session-cache </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-cache-size class=md-nav__link> <span class=md-ellipsis> ssl-session-cache-size </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-tickets class=md-nav__link> <span class=md-ellipsis> ssl-session-tickets </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-ticket-key class=md-nav__link> <span class=md-ellipsis> ssl-session-ticket-key </span> </a> </li> <li class=md-nav__item> <a href=#ssl-session-timeout class=md-nav__link> <span class=md-ellipsis> ssl-session-timeout </span> </a> </li> <li class=md-nav__item> <a href=#ssl-buffer-size class=md-nav__link> <span class=md-ellipsis> ssl-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#use-proxy-protocol class=md-nav__link> <span class=md-ellipsis> use-proxy-protocol </span> </a> </li> <li class=md-nav__item> <a href=#proxy-protocol-header-timeout class=md-nav__link> <span class=md-ellipsis> proxy-protocol-header-timeout </span> </a> </li> <li class=md-nav__item> <a href=#enable-aio-write class=md-nav__link> <span class=md-ellipsis> enable-aio-write </span> </a> </li> <li class=md-nav__item> <a href=#use-gzip class=md-nav__link> <span class=md-ellipsis> use-gzip </span> </a> </li> <li class=md-nav__item> <a href=#use-geoip class=md-nav__link> <span class=md-ellipsis> use-geoip </span> </a> </li> <li class=md-nav__item> <a href=#use-geoip2 class=md-nav__link> <span class=md-ellipsis> use-geoip2 </span> </a> </li> <li class=md-nav__item> <a href=#geoip2-autoreload-in-minutes class=md-nav__link> <span class=md-ellipsis> geoip2-autoreload-in-minutes </span> </a> </li> <li class=md-nav__item> <a href=#enable-brotli class=md-nav__link> <span class=md-ellipsis> enable-brotli </span> </a> </li> <li class=md-nav__item> <a href=#brotli-level class=md-nav__link> <span class=md-ellipsis> brotli-level </span> </a> </li> <li class=md-nav__item> <a href=#brotli-min-length class=md-nav__link> <span class=md-ellipsis> brotli-min-length </span> </a> </li> <li class=md-nav__item> <a href=#brotli-types class=md-nav__link> <span class=md-ellipsis> brotli-types </span> </a> </li> <li class=md-nav__item> <a href=#use-http2 class=md-nav__link> <span class=md-ellipsis> use-http2 </span> </a> </li> <li class=md-nav__item> <a href=#gzip-disable class=md-nav__link> <span class=md-ellipsis> gzip-disable </span> </a> </li> <li class=md-nav__item> <a href=#gzip-level class=md-nav__link> <span class=md-ellipsis> gzip-level </span> </a> </li> <li class=md-nav__item> <a href=#gzip-min-length class=md-nav__link> <span class=md-ellipsis> gzip-min-length </span> </a> </li> <li class=md-nav__item> <a href=#gzip-types class=md-nav__link> <span class=md-ellipsis> gzip-types </span> </a> </li> <li class=md-nav__item> <a href=#worker-processes class=md-nav__link> <span class=md-ellipsis> worker-processes </span> </a> </li> <li class=md-nav__item> <a href=#worker-cpu-affinity class=md-nav__link> <span class=md-ellipsis> worker-cpu-affinity </span> </a> </li> <li class=md-nav__item> <a href=#worker-shutdown-timeout class=md-nav__link> <span class=md-ellipsis> worker-shutdown-timeout </span> </a> </li> <li class=md-nav__item> <a href=#load-balance class=md-nav__link> <span class=md-ellipsis> load-balance </span> </a> </li> <li class=md-nav__item> <a href=#variables-hash-bucket-size class=md-nav__link> <span class=md-ellipsis> variables-hash-bucket-size </span> </a> </li> <li class=md-nav__item> <a href=#variables-hash-max-size class=md-nav__link> <span class=md-ellipsis> variables-hash-max-size </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-connections class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-connections </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-time class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-time </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-timeout class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-timeout </span> </a> </li> <li class=md-nav__item> <a href=#upstream-keepalive-requests class=md-nav__link> <span class=md-ellipsis> upstream-keepalive-requests </span> </a> </li> <li class=md-nav__item> <a href=#limit-conn-zone-variable class=md-nav__link> <span class=md-ellipsis> limit-conn-zone-variable </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-timeout class=md-nav__link> <span class=md-ellipsis> proxy-stream-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-next-upstream class=md-nav__link> <span class=md-ellipsis> proxy-stream-next-upstream </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-next-upstream-timeout class=md-nav__link> <span class=md-ellipsis> proxy-stream-next-upstream-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-next-upstream-tries class=md-nav__link> <span class=md-ellipsis> proxy-stream-next-upstream-tries </span> </a> </li> <li class=md-nav__item> <a href=#proxy-stream-responses class=md-nav__link> <span class=md-ellipsis> proxy-stream-responses </span> </a> </li> <li class=md-nav__item> <a href=#bind-address class=md-nav__link> <span class=md-ellipsis> bind-address </span> </a> </li> <li class=md-nav__item> <a href=#use-forwarded-headers class=md-nav__link> <span class=md-ellipsis> use-forwarded-headers </span> </a> </li> <li class=md-nav__item> <a href=#enable-real-ip class=md-nav__link> <span class=md-ellipsis> enable-real-ip </span> </a> </li> <li class=md-nav__item> <a href=#forwarded-for-header class=md-nav__link> <span class=md-ellipsis> forwarded-for-header </span> </a> </li> <li class=md-nav__item> <a href=#forwarded-for-proxy-protocol-header class=md-nav__link> <span class=md-ellipsis> forwarded-for-proxy-protocol-header </span> </a> </li> <li class=md-nav__item> <a href=#compute-full-forwarded-for class=md-nav__link> <span class=md-ellipsis> compute-full-forwarded-for </span> </a> </li> <li class=md-nav__item> <a href=#proxy-add-original-uri-header class=md-nav__link> <span class=md-ellipsis> proxy-add-original-uri-header </span> </a> </li> <li class=md-nav__item> <a href=#generate-request-id class=md-nav__link> <span class=md-ellipsis> generate-request-id </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-collector-host class=md-nav__link> <span class=md-ellipsis> jaeger-collector-host </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-collector-port class=md-nav__link> <span class=md-ellipsis> jaeger-collector-port </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-endpoint class=md-nav__link> <span class=md-ellipsis> jaeger-endpoint </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-service-name class=md-nav__link> <span class=md-ellipsis> jaeger-service-name </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-propagation-format class=md-nav__link> <span class=md-ellipsis> jaeger-propagation-format </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-type class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-type </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-param class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-param </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-host class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-host </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-sampler-port class=md-nav__link> <span class=md-ellipsis> jaeger-sampler-port </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-trace-context-header-name class=md-nav__link> <span class=md-ellipsis> jaeger-trace-context-header-name </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-debug-header class=md-nav__link> <span class=md-ellipsis> jaeger-debug-header </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-baggage-header class=md-nav__link> <span class=md-ellipsis> jaeger-baggage-header </span> </a> </li> <li class=md-nav__item> <a href=#jaeger-tracer-baggage-header-prefix class=md-nav__link> <span class=md-ellipsis> jaeger-tracer-baggage-header-prefix </span> </a> </li> <li class=md-nav__item> <a href=#enable-opentelemetry class=md-nav__link> <span class=md-ellipsis> enable-opentelemetry </span> </a> </li> <li class=md-nav__item> <a href=#opentelemetry-operation-name class=md-nav__link> <span class=md-ellipsis> opentelemetry-operation-name </span> </a> </li> <li class=md-nav__item> <a href=#opentelemetry-config class=md-nav__link> <span class=md-ellipsis> opentelemetry-config </span> </a> </li> <li class=md-nav__item> <a href=#otlp-collector-host class=md-nav__link> <span class=md-ellipsis> otlp-collector-host </span> </a> </li> <li class=md-nav__item> <a href=#otlp-collector-port class=md-nav__link> <span class=md-ellipsis> otlp-collector-port </span> </a> </li> <li class=md-nav__item> <a href=#otel-service-name class=md-nav__link> <span class=md-ellipsis> otel-service-name </span> </a> </li> <li class=md-nav__item> <a href=#opentelemetry-trust-incoming-span class=md-nav__link> <span class=md-ellipsis> opentelemetry-trust-incoming-span </span> </a> </li> <li class=md-nav__item> <a href=#otel-sampler-parent-based class=md-nav__link> <span class=md-ellipsis> otel-sampler-parent-based </span> </a> </li> <li class=md-nav__item> <a href=#otel-sampler-ratio class=md-nav__link> <span class=md-ellipsis> otel-sampler-ratio </span> </a> </li> <li class=md-nav__item> <a href=#otel-sampler class=md-nav__link> <span class=md-ellipsis> otel-sampler </span> </a> </li> <li class=md-nav__item> <a href=#main-snippet class=md-nav__link> <span class=md-ellipsis> main-snippet </span> </a> </li> <li class=md-nav__item> <a href=#http-snippet class=md-nav__link> <span class=md-ellipsis> http-snippet </span> </a> </li> <li class=md-nav__item> <a href=#server-snippet class=md-nav__link> <span class=md-ellipsis> server-snippet </span> </a> </li> <li class=md-nav__item> <a href=#stream-snippet class=md-nav__link> <span class=md-ellipsis> stream-snippet </span> </a> </li> <li class=md-nav__item> <a href=#location-snippet class=md-nav__link> <span class=md-ellipsis> location-snippet </span> </a> </li> <li class=md-nav__item> <a href=#custom-http-errors class=md-nav__link> <span class=md-ellipsis> custom-http-errors </span> </a> </li> <li class=md-nav__item> <a href=#proxy-body-size class=md-nav__link> <span class=md-ellipsis> proxy-body-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-connect-timeout class=md-nav__link> <span class=md-ellipsis> proxy-connect-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-read-timeout class=md-nav__link> <span class=md-ellipsis> proxy-read-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-send-timeout class=md-nav__link> <span class=md-ellipsis> proxy-send-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-buffers-number class=md-nav__link> <span class=md-ellipsis> proxy-buffers-number </span> </a> </li> <li class=md-nav__item> <a href=#proxy-buffer-size class=md-nav__link> <span class=md-ellipsis> proxy-buffer-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-busy-buffers-size class=md-nav__link> <span class=md-ellipsis> proxy-busy-buffers-size </span> </a> </li> <li class=md-nav__item> <a href=#proxy-cookie-path class=md-nav__link> <span class=md-ellipsis> proxy-cookie-path </span> </a> </li> <li class=md-nav__item> <a href=#proxy-cookie-domain class=md-nav__link> <span class=md-ellipsis> proxy-cookie-domain </span> </a> </li> <li class=md-nav__item> <a href=#proxy-next-upstream class=md-nav__link> <span class=md-ellipsis> proxy-next-upstream </span> </a> </li> <li class=md-nav__item> <a href=#proxy-next-upstream-timeout class=md-nav__link> <span class=md-ellipsis> proxy-next-upstream-timeout </span> </a> </li> <li class=md-nav__item> <a href=#proxy-next-upstream-tries class=md-nav__link> <span class=md-ellipsis> proxy-next-upstream-tries </span> </a> </li> <li class=md-nav__item> <a href=#proxy-redirect-from class=md-nav__link> <span class=md-ellipsis> proxy-redirect-from </span> </a> </li> <li class=md-nav__item> <a href=#proxy-request-buffering class=md-nav__link> <span class=md-ellipsis> proxy-request-buffering </span> </a> </li> <li class=md-nav__item> <a href=#ssl-redirect class=md-nav__link> <span class=md-ellipsis> ssl-redirect </span> </a> </li> <li class=md-nav__item> <a href=#force-ssl-redirect class=md-nav__link> <span class=md-ellipsis> force-ssl-redirect </span> </a> </li> <li class=md-nav__item> <a href=#denylist-source-range class=md-nav__link> <span class=md-ellipsis> denylist-source-range </span> </a> </li> <li class=md-nav__item> <a href=#whitelist-source-range class=md-nav__link> <span class=md-ellipsis> whitelist-source-range </span> </a> </li> <li class=md-nav__item> <a href=#skip-access-log-urls class=md-nav__link> <span class=md-ellipsis> skip-access-log-urls </span> </a> </li> <li class=md-nav__item> <a href=#limit-rate class=md-nav__link> <span class=md-ellipsis> limit-rate </span> </a> </li> <li class=md-nav__item> <a href=#limit-rate-after class=md-nav__link> <span class=md-ellipsis> limit-rate-after </span> </a> </li> <li class=md-nav__item> <a href=#lua-shared-dicts class=md-nav__link> <span class=md-ellipsis> lua-shared-dicts </span> </a> </li> <li class=md-nav__item> <a href=#http-redirect-code class=md-nav__link> <span class=md-ellipsis> http-redirect-code </span> </a> </li> <li class=md-nav__item> <a href=#proxy-buffering class=md-nav__link> <span class=md-ellipsis> proxy-buffering </span> </a> </li> <li class=md-nav__item> <a href=#limit-req-status-code class=md-nav__link> <span class=md-ellipsis> limit-req-status-code </span> </a> </li> <li class=md-nav__item> <a href=#limit-conn-status-code class=md-nav__link> <span class=md-ellipsis> limit-conn-status-code </span> </a> </li> <li class=md-nav__item> <a href=#enable-syslog class=md-nav__link> <span class=md-ellipsis> enable-syslog </span> </a> </li> <li class=md-nav__item> <a href=#syslog-host class=md-nav__link> <span class=md-ellipsis> syslog-host </span> </a> </li> <li class=md-nav__item> <a href=#syslog-port class=md-nav__link> <span class=md-ellipsis> syslog-port </span> </a> </li> <li class=md-nav__item> <a href=#no-tls-redirect-locations class=md-nav__link> <span class=md-ellipsis> no-tls-redirect-locations </span> </a> </li> <li class=md-nav__item> <a href=#global-allowed-response-headers class=md-nav__link> <span class=md-ellipsis> global-allowed-response-headers </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-url class=md-nav__link> <span class=md-ellipsis> global-auth-url </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-method class=md-nav__link> <span class=md-ellipsis> global-auth-method </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-signin class=md-nav__link> <span class=md-ellipsis> global-auth-signin </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-signin-redirect-param class=md-nav__link> <span class=md-ellipsis> global-auth-signin-redirect-param </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-response-headers class=md-nav__link> <span class=md-ellipsis> global-auth-response-headers </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-request-redirect class=md-nav__link> <span class=md-ellipsis> global-auth-request-redirect </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-snippet class=md-nav__link> <span class=md-ellipsis> global-auth-snippet </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-cache-key class=md-nav__link> <span class=md-ellipsis> global-auth-cache-key </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-cache-duration class=md-nav__link> <span class=md-ellipsis> global-auth-cache-duration </span> </a> </li> <li class=md-nav__item> <a href=#global-auth-always-set-cookie class=md-nav__link> <span class=md-ellipsis> global-auth-always-set-cookie </span> </a> </li> <li class=md-nav__item> <a href=#no-auth-locations class=md-nav__link> <span class=md-ellipsis> no-auth-locations </span> </a> </li> <li class=md-nav__item> <a href=#block-cidrs class=md-nav__link> <span class=md-ellipsis> block-cidrs </span> </a> </li> <li class=md-nav__item> <a href=#block-user-agents class=md-nav__link> <span class=md-ellipsis> block-user-agents </span> </a> </li> <li class=md-nav__item> <a href=#block-referers class=md-nav__link> <span class=md-ellipsis> block-referers </span> </a> </li> <li class=md-nav__item> <a href=#proxy-ssl-location-only class=md-nav__link> <span class=md-ellipsis> proxy-ssl-location-only </span> </a> </li> <li class=md-nav__item> <a href=#default-type class=md-nav__link> <span class=md-ellipsis> default-type </span> </a> </li> <li class=md-nav__item> <a href=#service-upstream class=md-nav__link> <span class=md-ellipsis> service-upstream </span> </a> </li> <li class=md-nav__item> <a href=#ssl-reject-handshake class=md-nav__link> <span class=md-ellipsis> ssl-reject-handshake </span> </a> </li> <li class=md-nav__item> <a href=#debug-connections class=md-nav__link> <span class=md-ellipsis> debug-connections </span> </a> </li> <li class=md-nav__item> <a href=#strict-validate-path-type class=md-nav__link> <span class=md-ellipsis> strict-validate-path-type </span> </a> </li> <li class=md-nav__item> <a href=#grpc-buffer-size-kb class=md-nav__link> <span class=md-ellipsis> grpc-buffer-size-kb </span> </a> </li> <li class=md-nav__item> <a href=#relative-redirects class=md-nav__link> <span class=md-ellipsis> relative-redirects </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=configmaps>ConfigMaps<a class=headerlink href=#configmaps title="Permanent link"> ¶</a></h1> <p>ConfigMaps allow you to decouple configuration artifacts from image content to keep containerized applications portable.</p> <p>The ConfigMap API resource stores configuration data as key-value pairs. The data provides the configurations for system components for the nginx-controller.</p> <p>In order to overwrite nginx-controller configuration values as seen in <a href=https://github.com/kubernetes/ingress-nginx/blob/main/internal/ingress/controller/config/config.go>config.go</a>, you can add key-value pairs to the data section of the config-map. For Example:</p> <div class=highlight><pre><span></span><code><span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>map-hash-bucket-size</span><span class=p>:</span><span class=w> </span><span class=s>&quot;128&quot;</span>
<span class=w>  </span><span class=nt>ssl-protocols</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">SSLv2</span>
</code></pre></div> <div class="admonition important"> <p class=admonition-title>Important</p> <p>The key and values in a ConfigMap can only be strings. This means that we want a value with boolean values we need to quote the values, like "true" or "false". Same for numbers, like "100".</p> <p>"Slice" types (defined below as <code>[]string</code> or <code>[]int</code>) can be provided as a comma-delimited string.</p> </div> <h2 id=configuration-options>Configuration options<a class=headerlink href=#configuration-options title="Permanent link"> ¶</a></h2> <p>The following table shows a configuration option's name, type, and the default value:</p> <table> <thead> <tr> <th style="text-align: left;">name</th> <th style="text-align: left;">type</th> <th style="text-align: left;">default</th> <th style="text-align: left;">notes</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><a href=#add-headers>add-headers</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#allow-backend-server-header>allow-backend-server-header</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#allow-cross-namespace-resources>allow-cross-namespace-resources</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#allow-snippet-annotations>allow-snippet-annotations</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#annotations-risk-level>annotations-risk-level</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">High</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#annotation-value-word-blocklist>annotation-value-word-blocklist</a></td> <td style="text-align: left;">string array</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#hide-headers>hide-headers</a></td> <td style="text-align: left;">string array</td> <td style="text-align: left;">empty</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#access-log-params>access-log-params</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#access-log-path>access-log-path</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"/var/log/nginx/access.log"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#http-access-log-path>http-access-log-path</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#stream-access-log-path>stream-access-log-path</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-access-log-for-default-backend>enable-access-log-for-default-backend</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#error-log-path>error-log-path</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"/var/log/nginx/error.log"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-modsecurity>enable-modsecurity</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#modsecurity-snippet>modsecurity-snippet</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-owasp-modsecurity-crs>enable-owasp-modsecurity-crs</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#client-header-buffer-size>client-header-buffer-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"1k"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#client-header-timeout>client-header-timeout</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">60</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#client-body-buffer-size>client-body-buffer-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"8k"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#client-body-timeout>client-body-timeout</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">60</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#disable-access-log>disable-access-log</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#disable-ipv6>disable-ipv6</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#disable-ipv6-dns>disable-ipv6-dns</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-underscores-in-headers>enable-underscores-in-headers</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-ocsp>enable-ocsp</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ignore-invalid-headers>ignore-invalid-headers</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#retry-non-idempotent>retry-non-idempotent</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#error-log-level>error-log-level</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"notice"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#http2-max-field-size>http2-max-field-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;">DEPRECATED in favour of <a href=#large-client-header-buffers>large_client_header_buffers</a></td> </tr> <tr> <td style="text-align: left;"><a href=#http2-max-header-size>http2-max-header-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;">DEPRECATED in favour of <a href=#large-client-header-buffers>large_client_header_buffers</a></td> </tr> <tr> <td style="text-align: left;"><a href=#http2-max-requests>http2-max-requests</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">0</td> <td style="text-align: left;">DEPRECATED in favour of <a href=#keep-alive-requests>keepalive_requests</a></td> </tr> <tr> <td style="text-align: left;"><a href=#http2-max-concurrent-streams>http2-max-concurrent-streams</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">128</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#hsts>hsts</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#hsts-include-subdomains>hsts-include-subdomains</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#hsts-max-age>hsts-max-age</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"31536000"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#hsts-preload>hsts-preload</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#keep-alive>keep-alive</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">75</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#keep-alive-requests>keep-alive-requests</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">1000</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#large-client-header-buffers>large-client-header-buffers</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"4 8k"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#log-format-escape-none>log-format-escape-none</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#log-format-escape-json>log-format-escape-json</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#log-format-upstream>log-format-upstream</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;"><code>$remote_addr - $remote_user [$time_local] "$request" $status $body_bytes_sent "$http_referer" "$http_user_agent" $request_length $request_time [$proxy_upstream_name] [$proxy_alternative_upstream_name] $upstream_addr $upstream_response_length $upstream_response_time $upstream_status $req_id</code></td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#log-format-stream>log-format-stream</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;"><code>[$remote_addr] [$time_local] $protocol $status $bytes_sent $bytes_received $session_time</code></td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-multi-accept>enable-multi-accept</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#max-worker-connections>max-worker-connections</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">16384</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#max-worker-open-files>max-worker-open-files</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">0</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#map-hash-bucket-size>map-hash-bucket-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">64</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#nginx-status-ipv4-whitelist>nginx-status-ipv4-whitelist</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">"127.0.0.1"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#nginx-status-ipv6-whitelist>nginx-status-ipv6-whitelist</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">"::1"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-real-ip-cidr>proxy-real-ip-cidr</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">"0.0.0.0/0"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-set-headers>proxy-set-headers</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#server-name-hash-max-size>server-name-hash-max-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">1024</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#server-name-hash-bucket-size>server-name-hash-bucket-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;"><code>&lt;size of the processor’s cache line&gt;</code></td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-headers-hash-max-size>proxy-headers-hash-max-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">512</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-headers-hash-bucket-size>proxy-headers-hash-bucket-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">64</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#reuse-port>reuse-port</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#server-tokens>server-tokens</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-ciphers>ssl-ciphers</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-ecdh-curve>ssl-ecdh-curve</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"auto"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-dh-param>ssl-dh-param</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-protocols>ssl-protocols</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"TLSv1.2 TLSv1.3"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-session-cache>ssl-session-cache</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-session-cache-size>ssl-session-cache-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"10m"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-session-tickets>ssl-session-tickets</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-session-ticket-key>ssl-session-ticket-key</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;"><code>&lt;Randomly Generated&gt;</code></td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-session-timeout>ssl-session-timeout</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"10m"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-buffer-size>ssl-buffer-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"4k"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#use-proxy-protocol>use-proxy-protocol</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-protocol-header-timeout>proxy-protocol-header-timeout</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"5s"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-aio-write>enable-aio-write</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#use-gzip>use-gzip</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#use-geoip>use-geoip</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#use-geoip2>use-geoip2</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#geoip2-autoreload-in-minutes>geoip2-autoreload-in-minutes</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">"0"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-brotli>enable-brotli</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#brotli-level>brotli-level</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">4</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#brotli-min-length>brotli-min-length</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">20</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#brotli-types>brotli-types</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"application/xml+rss application/atom+xml application/javascript application/x-javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/javascript text/plain text/x-component"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#use-http2>use-http2</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#gzip-disable>gzip-disable</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#gzip-level>gzip-level</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">1</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#gzip-min-length>gzip-min-length</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">256</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#gzip-types>gzip-types</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"application/atom+xml application/javascript application/x-javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/javascript text/plain text/x-component"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#worker-processes>worker-processes</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;"><code>&lt;Number of CPUs&gt;</code></td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#worker-cpu-affinity>worker-cpu-affinity</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#worker-shutdown-timeout>worker-shutdown-timeout</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"240s"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-serial-reloads>enable-serial-reloads</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#load-balance>load-balance</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"round_robin"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#variables-hash-bucket-size>variables-hash-bucket-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">256</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#variables-hash-max-size>variables-hash-max-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">2048</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#upstream-keepalive-connections>upstream-keepalive-connections</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">320</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#upstream-keepalive-time>upstream-keepalive-time</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"1h"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#upstream-keepalive-timeout>upstream-keepalive-timeout</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">60</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#upstream-keepalive-requests>upstream-keepalive-requests</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">10000</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#limit-conn-zone-variable>limit-conn-zone-variable</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"$binary_remote_addr"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-stream-timeout>proxy-stream-timeout</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"600s"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-stream-next-upstream>proxy-stream-next-upstream</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-stream-next-upstream-timeout>proxy-stream-next-upstream-timeout</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"600s"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-stream-next-upstream-tries>proxy-stream-next-upstream-tries</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">3</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-stream-responses>proxy-stream-responses</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">1</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#bind-address>bind-address</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#use-forwarded-headers>use-forwarded-headers</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-real-ip>enable-real-ip</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#forwarded-for-header>forwarded-for-header</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"X-Forwarded-For"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#forwarded-for-proxy-protocol-header>forwarded-for-proxy-protocol-header</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"X-Forwarded-For-Proxy-Protocol"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#compute-full-forwarded-for>compute-full-forwarded-for</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-add-original-uri-header>proxy-add-original-uri-header</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#generate-request-id>generate-request-id</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-collector-host>jaeger-collector-host</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-collector-port>jaeger-collector-port</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">6831</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-endpoint>jaeger-endpoint</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-service-name>jaeger-service-name</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"nginx"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-propagation-format>jaeger-propagation-format</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"jaeger"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-sampler-type>jaeger-sampler-type</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"const"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-sampler-param>jaeger-sampler-param</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"1"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-sampler-host>jaeger-sampler-host</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"http://127.0.0.1"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-sampler-port>jaeger-sampler-port</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">5778</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-trace-context-header-name>jaeger-trace-context-header-name</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">uber-trace-id</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-debug-header>jaeger-debug-header</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">uber-debug-id</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-baggage-header>jaeger-baggage-header</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">jaeger-baggage</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#jaeger-trace-baggage-header-prefix>jaeger-trace-baggage-header-prefix</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">uberctx-</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-opentelemetry>enable-opentelemetry</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#opentelemetry-trust-incoming-span>opentelemetry-trust-incoming-span</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#opentelemetry-operation-name>opentelemetry-operation-name</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#opentelemetry-config>opentelemetry-config</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"/etc/ingress-controller/telemetry/opentelemetry.toml"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otlp-collector-host>otlp-collector-host</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otlp-collector-port>otlp-collector-port</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">4317</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otel-max-queuesize>otel-max-queuesize</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">2048</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otel-schedule-delay-millis>otel-schedule-delay-millis</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">5000</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otel-max-export-batch-size>otel-max-export-batch-size</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">512</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otel-service-name>otel-service-name</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"nginx"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otel-sampler>otel-sampler</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"AlwaysOn"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otel-sampler-parent-based>otel-sampler-parent-based</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#otel-sampler-ratio>otel-sampler-ratio</a></td> <td style="text-align: left;">float</td> <td style="text-align: left;">0.01</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#main-snippet>main-snippet</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#http-snippet>http-snippet</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#server-snippet>server-snippet</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#stream-snippet>stream-snippet</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#location-snippet>location-snippet</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#custom-http-errors>custom-http-errors</a></td> <td style="text-align: left;">[]int</td> <td style="text-align: left;">[]int{}</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-body-size>proxy-body-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"1m"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-connect-timeout>proxy-connect-timeout</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">5</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-read-timeout>proxy-read-timeout</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">60</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-send-timeout>proxy-send-timeout</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">60</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-buffers-number>proxy-buffers-number</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">4</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-buffer-size>proxy-buffer-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"4k"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-busy-buffers-size>proxy-busy-buffers-size</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-cookie-path>proxy-cookie-path</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"off"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-cookie-domain>proxy-cookie-domain</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"off"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-next-upstream>proxy-next-upstream</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"error timeout"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-next-upstream-timeout>proxy-next-upstream-timeout</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">0</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-next-upstream-tries>proxy-next-upstream-tries</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">3</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-redirect-from>proxy-redirect-from</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"off"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-request-buffering>proxy-request-buffering</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"on"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-redirect>ssl-redirect</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#force-ssl-redirect>force-ssl-redirect</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#denylist-source-range>denylist-source-range</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">[]string{}</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#whitelist-source-range>whitelist-source-range</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">[]string{}</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#skip-access-log-urls>skip-access-log-urls</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">[]string{}</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#limit-rate>limit-rate</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">0</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#limit-rate-after>limit-rate-after</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">0</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#lua-shared-dicts>lua-shared-dicts</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#http-redirect-code>http-redirect-code</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">308</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-buffering>proxy-buffering</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"off"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#limit-req-status-code>limit-req-status-code</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">503</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#limit-conn-status-code>limit-conn-status-code</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">503</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#enable-syslog>enable-syslog</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#syslog-host>syslog-host</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#syslog-port>syslog-port</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">514</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#no-tls-redirect-locations>no-tls-redirect-locations</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"/.well-known/acme-challenge"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-allowed-response-headers>global-allowed-response-headers</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-url>global-auth-url</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-method>global-auth-method</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-signin>global-auth-signin</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-signin-redirect-param>global-auth-signin-redirect-param</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"rd"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-response-headers>global-auth-response-headers</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-request-redirect>global-auth-request-redirect</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-snippet>global-auth-snippet</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-cache-key>global-auth-cache-key</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#global-auth-cache-duration>global-auth-cache-duration</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"200 202 401 5m"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#no-auth-locations>no-auth-locations</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"/.well-known/acme-challenge"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#block-cidrs>block-cidrs</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#block-user-agents>block-user-agents</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#block-referers>block-referers</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#proxy-ssl-location-only>proxy-ssl-location-only</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#default-type>default-type</a></td> <td style="text-align: left;">string</td> <td style="text-align: left;">"text/html"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#service-upstream>service-upstream</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#ssl-reject-handshake>ssl-reject-handshake</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"false"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#debug-connections>debug-connections</a></td> <td style="text-align: left;">[]string</td> <td style="text-align: left;">""</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#strict-validate-path-type>strict-validate-path-type</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">"true"</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#grpc-buffer-size-kb>grpc-buffer-size-kb</a></td> <td style="text-align: left;">int</td> <td style="text-align: left;">0</td> <td style="text-align: left;"></td> </tr> <tr> <td style="text-align: left;"><a href=#relative-redirects>relative-redirects</a></td> <td style="text-align: left;">bool</td> <td style="text-align: left;">false</td> <td style="text-align: left;"></td> </tr> </tbody> </table> <h2 id=add-headers>add-headers<a class=headerlink href=#add-headers title="Permanent link"> ¶</a></h2> <p>Sets custom headers from named configmap before sending traffic to the client. See <a href=#proxy-set-headers>proxy-set-headers</a>. <a href=https://github.com/kubernetes/ingress-nginx/tree/main/docs/examples/customization/custom-headers>example</a></p> <h2 id=allow-backend-server-header>allow-backend-server-header<a class=headerlink href=#allow-backend-server-header title="Permanent link"> ¶</a></h2> <p>Enables the return of the header Server from the backend instead of the generic nginx string. <em><strong>default:</strong></em> is disabled</p> <h2 id=allow-cross-namespace-resources>allow-cross-namespace-resources<a class=headerlink href=#allow-cross-namespace-resources title="Permanent link"> ¶</a></h2> <p>Enables users to consume cross namespace resource on annotations, when was previously enabled . <em><strong>default:</strong></em> false</p> <p><strong>Annotations that may be impacted with this change</strong>:</p> <ul> <li><code>auth-secret</code></li> <li><code>auth-proxy-set-header</code></li> <li><code>auth-tls-secret</code></li> <li><code>fastcgi-params-configmap</code></li> <li><code>proxy-ssl-secret</code></li> </ul> <h2 id=allow-snippet-annotations>allow-snippet-annotations<a class=headerlink href=#allow-snippet-annotations title="Permanent link"> ¶</a></h2> <p>Enables Ingress to parse and add <em>-snippet annotations/directives created by the user. _**default:*</em>_ <code>false</code></p> <p>Warning: We recommend enabling this option only if you TRUST users with permission to create Ingress objects, as this may allow a user to add restricted configurations to the final nginx.conf file</p> <h2 id=annotations-risk-level>annotations-risk-level<a class=headerlink href=#annotations-risk-level title="Permanent link"> ¶</a></h2> <p>Represents the risk accepted on an annotation. If the risk is, for instance <code>Medium</code>, annotations with risk High and Critical will not be accepted.</p> <p>Accepted values are <code>Critical</code>, <code>High</code>, <code>Medium</code> and <code>Low</code>.</p> <p><em><strong>default:</strong></em> <code>High</code></p> <h2 id=annotation-value-word-blocklist>annotation-value-word-blocklist<a class=headerlink href=#annotation-value-word-blocklist title="Permanent link"> ¶</a></h2> <p>Contains a comma-separated value of chars/words that are well known of being used to abuse Ingress configuration and must be blocked. Related to <a href=https://github.com/kubernetes/ingress-nginx/issues/7837>CVE-2021-25742</a></p> <p>When an annotation is detected with a value that matches one of the blocked bad words, the whole Ingress won't be configured.</p> <p><em><strong>default:</strong></em> <code>""</code></p> <p>When doing this, the default blocklist is override, which means that the Ingress admin should add all the words that should be blocked, here is a suggested block list.</p> <p><em><strong>suggested:</strong></em> <code>"load_module,lua_package,_by_lua,location,root,proxy_pass,serviceaccount,{,},',\""</code></p> <h2 id=hide-headers>hide-headers<a class=headerlink href=#hide-headers title="Permanent link"> ¶</a></h2> <p>Sets additional header that will not be passed from the upstream server to the client response. <em><strong>default:</strong></em> empty</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_hide_header>https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_hide_header</a></p> <h2 id=access-log-params>access-log-params<a class=headerlink href=#access-log-params title="Permanent link"> ¶</a></h2> <p>Additional params for access_log. For example, buffer=16k, gzip, flush=1m</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_log_module.html#access_log>https://nginx.org/en/docs/http/ngx_http_log_module.html#access_log</a></p> <h2 id=access-log-path>access-log-path<a class=headerlink href=#access-log-path title="Permanent link"> ¶</a></h2> <p>Access log path for both http and stream context. Goes to <code>/var/log/nginx/access.log</code> by default.</p> <p><strong>Note:</strong> the file <code>/var/log/nginx/access.log</code> is a symlink to <code>/dev/stdout</code></p> <h2 id=http-access-log-path>http-access-log-path<a class=headerlink href=#http-access-log-path title="Permanent link"> ¶</a></h2> <p>Access log path for http context globally. <em><strong>default:</strong></em> ""</p> <p><strong>Note:</strong> If not specified, the <code>access-log-path</code> will be used.</p> <h2 id=stream-access-log-path>stream-access-log-path<a class=headerlink href=#stream-access-log-path title="Permanent link"> ¶</a></h2> <p>Access log path for stream context globally. <em><strong>default:</strong></em> ""</p> <p><strong>Note:</strong> If not specified, the <code>access-log-path</code> will be used.</p> <h2 id=enable-access-log-for-default-backend>enable-access-log-for-default-backend<a class=headerlink href=#enable-access-log-for-default-backend title="Permanent link"> ¶</a></h2> <p>Enables logging access to default backend. <em><strong>default:</strong></em> is disabled.</p> <h2 id=error-log-path>error-log-path<a class=headerlink href=#error-log-path title="Permanent link"> ¶</a></h2> <p>Error log path. Goes to <code>/var/log/nginx/error.log</code> by default.</p> <p><strong>Note:</strong> the file <code>/var/log/nginx/error.log</code> is a symlink to <code>/dev/stderr</code></p> <p><em>References:</em> <a href=https://nginx.org/en/docs/ngx_core_module.html#error_log>https://nginx.org/en/docs/ngx_core_module.html#error_log</a></p> <h2 id=enable-modsecurity>enable-modsecurity<a class=headerlink href=#enable-modsecurity title="Permanent link"> ¶</a></h2> <p>Enables the modsecurity module for NGINX. <em><strong>default:</strong></em> is disabled</p> <h2 id=enable-owasp-modsecurity-crs>enable-owasp-modsecurity-crs<a class=headerlink href=#enable-owasp-modsecurity-crs title="Permanent link"> ¶</a></h2> <p>Enables the OWASP ModSecurity Core Rule Set (CRS). <em><strong>default:</strong></em> is disabled</p> <h2 id=modsecurity-snippet>modsecurity-snippet<a class=headerlink href=#modsecurity-snippet title="Permanent link"> ¶</a></h2> <p>Adds custom rules to modsecurity section of nginx configuration</p> <h2 id=client-header-buffer-size>client-header-buffer-size<a class=headerlink href=#client-header-buffer-size title="Permanent link"> ¶</a></h2> <p>Allows to configure a custom buffer size for reading client request header.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_buffer_size>https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_buffer_size</a></p> <h2 id=client-header-timeout>client-header-timeout<a class=headerlink href=#client-header-timeout title="Permanent link"> ¶</a></h2> <p>Defines a timeout for reading client request header, in seconds.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout>https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout</a></p> <h2 id=client-body-buffer-size>client-body-buffer-size<a class=headerlink href=#client-body-buffer-size title="Permanent link"> ¶</a></h2> <p>Sets buffer size for reading client request body.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size>https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size</a></p> <h2 id=client-body-timeout>client-body-timeout<a class=headerlink href=#client-body-timeout title="Permanent link"> ¶</a></h2> <p>Defines a timeout for reading client request body, in seconds.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout>https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout</a></p> <h2 id=disable-access-log>disable-access-log<a class=headerlink href=#disable-access-log title="Permanent link"> ¶</a></h2> <p>Disables the Access Log from the entire Ingress Controller. <em><strong>default:</strong></em> <code>false</code></p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_log_module.html#access_log>https://nginx.org/en/docs/http/ngx_http_log_module.html#access_log</a></p> <h2 id=disable-ipv6>disable-ipv6<a class=headerlink href=#disable-ipv6 title="Permanent link"> ¶</a></h2> <p>Disable listening on IPV6. <em><strong>default:</strong></em> <code>false</code>; IPv6 listening is enabled</p> <h2 id=disable-ipv6-dns>disable-ipv6-dns<a class=headerlink href=#disable-ipv6-dns title="Permanent link"> ¶</a></h2> <p>Disable IPV6 for nginx DNS resolver. <em><strong>default:</strong></em> <code>false</code>; IPv6 resolving enabled.</p> <h2 id=enable-underscores-in-headers>enable-underscores-in-headers<a class=headerlink href=#enable-underscores-in-headers title="Permanent link"> ¶</a></h2> <p>Enables underscores in header names. <em><strong>default:</strong></em> is disabled</p> <h2 id=enable-ocsp>enable-ocsp<a class=headerlink href=#enable-ocsp title="Permanent link"> ¶</a></h2> <p>Enables <a href=https://en.wikipedia.org/wiki/OCSP_stapling>Online Certificate Status Protocol stapling</a> (OCSP) support. <em><strong>default:</strong></em> is disabled</p> <h2 id=ignore-invalid-headers>ignore-invalid-headers<a class=headerlink href=#ignore-invalid-headers title="Permanent link"> ¶</a></h2> <p>Set if header fields with invalid names should be ignored. <em><strong>default:</strong></em> is enabled</p> <h2 id=retry-non-idempotent>retry-non-idempotent<a class=headerlink href=#retry-non-idempotent title="Permanent link"> ¶</a></h2> <p>Since 1.9.13 NGINX will not retry non-idempotent requests (POST, LOCK, PATCH) in case of an error in the upstream server. The previous behavior can be restored using the value "true".</p> <h2 id=error-log-level>error-log-level<a class=headerlink href=#error-log-level title="Permanent link"> ¶</a></h2> <p>Configures the logging level of errors. Log levels above are listed in the order of increasing severity.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/ngx_core_module.html#error_log>https://nginx.org/en/docs/ngx_core_module.html#error_log</a></p> <h2 id=http2-max-field-size>http2-max-field-size<a class=headerlink href=#http2-max-field-size title="Permanent link"> ¶</a></h2> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This feature was deprecated in 1.1.3 and will be removed in 1.3.0. Use <a href=#large-client-header-buffers>large-client-header-buffers</a> instead.</p> </div> <p>Limits the maximum size of an HPACK-compressed request header field.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_field_size>https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_field_size</a></p> <h2 id=http2-max-header-size>http2-max-header-size<a class=headerlink href=#http2-max-header-size title="Permanent link"> ¶</a></h2> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This feature was deprecated in 1.1.3 and will be removed in 1.3.0. Use <a href=#large-client-header-buffers>large-client-header-buffers</a> instead.</p> </div> <p>Limits the maximum size of the entire request header list after HPACK decompression.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_header_size>https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_header_size</a></p> <h2 id=http2-max-requests>http2-max-requests<a class=headerlink href=#http2-max-requests title="Permanent link"> ¶</a></h2> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This feature was deprecated in 1.1.3 and will be removed in 1.3.0. Use <a href=#upstream-keepalive-requests>upstream-keepalive-requests</a> instead.</p> </div> <p>Sets the maximum number of requests (including push requests) that can be served through one HTTP/2 connection, after which the next client request will lead to connection closing and the need of establishing a new connection.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_requests>https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_requests</a></p> <h2 id=http2-max-concurrent-streams>http2-max-concurrent-streams<a class=headerlink href=#http2-max-concurrent-streams title="Permanent link"> ¶</a></h2> <p>Sets the maximum number of concurrent HTTP/2 streams in a connection.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_concurrent_streams>https://nginx.org/en/docs/http/ngx_http_v2_module.html#http2_max_concurrent_streams</a></p> <h2 id=hsts>hsts<a class=headerlink href=#hsts title="Permanent link"> ¶</a></h2> <p>Enables or disables the header HSTS in servers running SSL. HTTP Strict Transport Security (often abbreviated as HSTS) is a security feature (HTTP header) that tell browsers that it should only be communicated with using HTTPS, instead of using HTTP. It provides protection against protocol downgrade attacks and cookie theft.</p> <p><em>References:</em></p> <ul> <li><a href=https://developer.mozilla.org/en-US/docs/Web/Security/HTTP_strict_transport_security>https://developer.mozilla.org/en-US/docs/Web/Security/HTTP_strict_transport_security</a></li> <li><a href=https://blog.qualys.com/securitylabs/2016/03/28/the-importance-of-a-proper-http-strict-transport-security-implementation-on-your-web-server>https://blog.qualys.com/securitylabs/2016/03/28/the-importance-of-a-proper-http-strict-transport-security-implementation-on-your-web-server</a></li> </ul> <h2 id=hsts-include-subdomains>hsts-include-subdomains<a class=headerlink href=#hsts-include-subdomains title="Permanent link"> ¶</a></h2> <p>Enables or disables the use of HSTS in all the subdomains of the server-name.</p> <h2 id=hsts-max-age>hsts-max-age<a class=headerlink href=#hsts-max-age title="Permanent link"> ¶</a></h2> <p>Sets the time, in seconds, that the browser should remember that this site is only to be accessed using HTTPS.</p> <h2 id=hsts-preload>hsts-preload<a class=headerlink href=#hsts-preload title="Permanent link"> ¶</a></h2> <p>Enables or disables the preload attribute in the HSTS feature (when it is enabled).</p> <h2 id=keep-alive>keep-alive<a class=headerlink href=#keep-alive title="Permanent link"> ¶</a></h2> <p>Sets the time, in seconds, during which a keep-alive client connection will stay open on the server side. The zero value disables keep-alive client connections.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_timeout>https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_timeout</a></p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>Setting <code>keep-alive: '0'</code> will most likely break concurrent http/2 requests due to changes introduced with nginx 1.19.7</p> </div> <div class=highlight><pre><span></span><code>Changes with nginx 1.19.7                                        16 Feb 2021

    *) Change: connections handling in HTTP/2 has been changed to better
       match HTTP/1.x; the &quot;http2_recv_timeout&quot;, &quot;http2_idle_timeout&quot;, and
       &quot;http2_max_requests&quot; directives have been removed, the
       &quot;keepalive_timeout&quot; and &quot;keepalive_requests&quot; directives should be
       used instead.
</code></pre></div> <p><em>References:</em> <a href=https://nginx.org/en/CHANGES>nginx change log</a> <a href=https://trac.nginx.org/nginx/ticket/2155>nginx issue tracker</a> <a href=https://mailman.nginx.org/pipermail/nginx/2021-May/060697.html>nginx mailing list</a></p> <h2 id=keep-alive-requests>keep-alive-requests<a class=headerlink href=#keep-alive-requests title="Permanent link"> ¶</a></h2> <p>Sets the maximum number of requests that can be served through one keep-alive connection.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_requests>https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_requests</a></p> <h2 id=large-client-header-buffers>large-client-header-buffers<a class=headerlink href=#large-client-header-buffers title="Permanent link"> ¶</a></h2> <p>Sets the maximum number and size of buffers used for reading large client request header. <em><strong>default:</strong></em> 4 8k</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#large_client_header_buffers>https://nginx.org/en/docs/http/ngx_http_core_module.html#large_client_header_buffers</a></p> <h2 id=log-format-escape-none>log-format-escape-none<a class=headerlink href=#log-format-escape-none title="Permanent link"> ¶</a></h2> <p>Sets if the escape parameter is disabled entirely for character escaping in variables ("true") or controlled by log-format-escape-json ("false") Sets the nginx <a href=https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format>log format</a>.</p> <h2 id=log-format-escape-json>log-format-escape-json<a class=headerlink href=#log-format-escape-json title="Permanent link"> ¶</a></h2> <p>Sets if the escape parameter allows JSON ("true") or default characters escaping in variables ("false") Sets the nginx <a href=https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format>log format</a>.</p> <h2 id=log-format-upstream>log-format-upstream<a class=headerlink href=#log-format-upstream title="Permanent link"> ¶</a></h2> <p>Sets the nginx <a href=https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format>log format</a>. Example for json output:</p> <div class=highlight><pre><span></span><code><span class=err>log</span><span class=mi>-</span><span class=kc>f</span><span class=err>orma</span><span class=kc>t</span><span class=mi>-</span><span class=err>ups</span><span class=kc>trea</span><span class=err>m</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=p>{</span><span class=nt>&quot;time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$time_iso8601&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;remote_addr&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$proxy_protocol_addr&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;x_forwarded_for&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$proxy_add_x_forwarded_for&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;request_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$req_id&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;remote_user&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$remote_user&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;bytes_sent&quot;</span><span class=p>:</span><span class=w> </span><span class=err>$by</span><span class=kc>tes</span><span class=err>_se</span><span class=kc>nt</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;request_time&quot;</span><span class=p>:</span><span class=w> </span><span class=err>$reques</span><span class=kc>t</span><span class=err>_</span><span class=kc>t</span><span class=err>ime</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=err>$s</span><span class=kc>tatus</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;vhost&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$host&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;request_proto&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$server_protocol&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$uri&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;request_query&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$args&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;request_length&quot;</span><span class=p>:</span><span class=w> </span><span class=err>$reques</span><span class=kc>t</span><span class=err>_le</span><span class=kc>n</span><span class=err>g</span><span class=kc>t</span><span class=err>h</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;duration&quot;</span><span class=p>:</span><span class=w> </span><span class=err>$reques</span><span class=kc>t</span><span class=err>_</span><span class=kc>t</span><span class=err>ime</span><span class=p>,</span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$request_method&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;http_referrer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$http_referer&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;http_user_agent&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$http_user_agent&quot;</span><span class=w> </span><span class=p>}</span><span class=err>&#39;</span>
</code></pre></div> <p>Please check the <a href=../log-format/ >log-format</a> for definition of each field.</p> <h2 id=log-format-stream>log-format-stream<a class=headerlink href=#log-format-stream title="Permanent link"> ¶</a></h2> <p>Sets the nginx <a href=https://nginx.org/en/docs/stream/ngx_stream_log_module.html#log_format>stream format</a>.</p> <h2 id=enable-multi-accept>enable-multi-accept<a class=headerlink href=#enable-multi-accept title="Permanent link"> ¶</a></h2> <p>If disabled, a worker process will accept one new connection at a time. Otherwise, a worker process will accept all new connections at a time. <em><strong>default:</strong></em> true</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/ngx_core_module.html#multi_accept>https://nginx.org/en/docs/ngx_core_module.html#multi_accept</a></p> <h2 id=max-worker-connections>max-worker-connections<a class=headerlink href=#max-worker-connections title="Permanent link"> ¶</a></h2> <p>Sets the <a href=https://nginx.org/en/docs/ngx_core_module.html#worker_connections>maximum number of simultaneous connections</a> that can be opened by each worker process. 0 will use the value of <a href=#max-worker-open-files>max-worker-open-files</a>. <em><strong>default:</strong></em> 16384</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Using 0 in scenarios of high load improves performance at the cost of increasing RAM utilization (even on idle).</p> </div> <h2 id=max-worker-open-files>max-worker-open-files<a class=headerlink href=#max-worker-open-files title="Permanent link"> ¶</a></h2> <p>Sets the <a href=https://nginx.org/en/docs/ngx_core_module.html#worker_rlimit_nofile>maximum number of files</a> that can be opened by each worker process. The default of 0 means "max open files (system's limit) - 1024". <em><strong>default:</strong></em> 0</p> <h2 id=map-hash-bucket-size>map-hash-bucket-size<a class=headerlink href=#map-hash-bucket-size title="Permanent link"> ¶</a></h2> <p>Sets the bucket size for the <a href=https://nginx.org/en/docs/http/ngx_http_map_module.html#map_hash_bucket_size>map variables hash tables</a>. The details of setting up hash tables are provided in a separate <a href=https://nginx.org/en/docs/hash.html>document</a>.</p> <h2 id=proxy-real-ip-cidr>proxy-real-ip-cidr<a class=headerlink href=#proxy-real-ip-cidr title="Permanent link"> ¶</a></h2> <p>If <code>use-forwarded-headers</code> or <code>use-proxy-protocol</code> is enabled, <code>proxy-real-ip-cidr</code> defines the default IP/network address of your external load balancer. Can be a comma-separated list of CIDR blocks. <em><strong>default:</strong></em> "0.0.0.0/0"</p> <h2 id=proxy-set-headers>proxy-set-headers<a class=headerlink href=#proxy-set-headers title="Permanent link"> ¶</a></h2> <p>Sets custom headers from named configmap before sending traffic to backends. The value format is namespace/name. See <a href=https://kubernetes.github.io/ingress-nginx/examples/customization/custom-headers/ >example</a></p> <h2 id=server-name-hash-max-size>server-name-hash-max-size<a class=headerlink href=#server-name-hash-max-size title="Permanent link"> ¶</a></h2> <p>Sets the maximum size of the <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_max_size>server names hash tables</a> used in server names,map directive’s values, MIME types, names of request header strings, etc.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/hash.html>https://nginx.org/en/docs/hash.html</a></p> <h2 id=server-name-hash-bucket-size>server-name-hash-bucket-size<a class=headerlink href=#server-name-hash-bucket-size title="Permanent link"> ¶</a></h2> <p>Sets the size of the bucket for the server names hash tables.</p> <p><em>References:</em></p> <ul> <li><a href=https://nginx.org/en/docs/hash.html>https://nginx.org/en/docs/hash.html</a></li> <li><a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_bucket_size>https://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_bucket_size</a></li> </ul> <h2 id=proxy-headers-hash-max-size>proxy-headers-hash-max-size<a class=headerlink href=#proxy-headers-hash-max-size title="Permanent link"> ¶</a></h2> <p>Sets the maximum size of the proxy headers hash tables.</p> <p><em>References:</em></p> <ul> <li><a href=https://nginx.org/en/docs/hash.html>https://nginx.org/en/docs/hash.html</a></li> <li><a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_headers_hash_max_size>https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_headers_hash_max_size</a></li> </ul> <h2 id=reuse-port>reuse-port<a class=headerlink href=#reuse-port title="Permanent link"> ¶</a></h2> <p>Instructs NGINX to create an individual listening socket for each worker process (using the SO_REUSEPORT socket option), allowing a kernel to distribute incoming connections between worker processes <em><strong>default:</strong></em> true</p> <h2 id=proxy-headers-hash-bucket-size>proxy-headers-hash-bucket-size<a class=headerlink href=#proxy-headers-hash-bucket-size title="Permanent link"> ¶</a></h2> <p>Sets the size of the bucket for the proxy headers hash tables.</p> <p><em>References:</em></p> <ul> <li><a href=https://nginx.org/en/docs/hash.html>https://nginx.org/en/docs/hash.html</a></li> <li><a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_headers_hash_bucket_size>https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_headers_hash_bucket_size</a></li> </ul> <h2 id=server-tokens>server-tokens<a class=headerlink href=#server-tokens title="Permanent link"> ¶</a></h2> <p>Send NGINX Server header in responses and display NGINX version in error pages. <em><strong>default:</strong></em> is disabled</p> <h2 id=ssl-ciphers>ssl-ciphers<a class=headerlink href=#ssl-ciphers title="Permanent link"> ¶</a></h2> <p>Sets the <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_ciphers>ciphers</a> list to enable. The ciphers are specified in the format understood by the OpenSSL library.</p> <p>The default cipher list is: <code>ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256</code>.</p> <p>The ordering of a ciphersuite is very important because it decides which algorithms are going to be selected in priority. The recommendation above prioritizes algorithms that provide perfect <a href=https://wiki.mozilla.org/Security/Server_Side_TLS#Forward_Secrecy>forward secrecy</a>.</p> <p>DHE-based cyphers will not be available until DH parameter is configured <a href=https://github.com/kubernetes/ingress-nginx/tree/main/docs/examples/customization/ssl-dh-param>Custom DH parameters for perfect forward secrecy</a></p> <p>Please check the <a href=https://mozilla.github.io/server-side-tls/ssl-config-generator/ >Mozilla SSL Configuration Generator</a>.</p> <p><strong>Note:</strong> ssl_prefer_server_ciphers directive will be enabled by default for http context.</p> <h2 id=ssl-ecdh-curve>ssl-ecdh-curve<a class=headerlink href=#ssl-ecdh-curve title="Permanent link"> ¶</a></h2> <p>Specifies a curve for ECDHE ciphers.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_ecdh_curve>https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_ecdh_curve</a></p> <h2 id=ssl-dh-param>ssl-dh-param<a class=headerlink href=#ssl-dh-param title="Permanent link"> ¶</a></h2> <p>Sets the name of the secret that contains Diffie-Hellman key to help with "Perfect Forward Secrecy".</p> <p><em>References:</em></p> <ul> <li><a href=https://wiki.openssl.org/index.php/Diffie-Hellman_parameters>https://wiki.openssl.org/index.php/Diffie-Hellman_parameters</a></li> <li><a href=https://wiki.mozilla.org/Security/Server_Side_TLS#DHE_handshake_and_dhparam>https://wiki.mozilla.org/Security/Server_Side_TLS#DHE_handshake_and_dhparam</a></li> <li><a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_dhparam>https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_dhparam</a></li> </ul> <h2 id=ssl-protocols>ssl-protocols<a class=headerlink href=#ssl-protocols title="Permanent link"> ¶</a></h2> <p>Sets the <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_protocols>SSL protocols</a> to use. The default is: <code>TLSv1.2 TLSv1.3</code>.</p> <p>Please check the result of the configuration using <code>https://ssllabs.com/ssltest/analyze.html</code> or <code>https://testssl.sh</code>.</p> <h2 id=ssl-early-data>ssl-early-data<a class=headerlink href=#ssl-early-data title="Permanent link"> ¶</a></h2> <p>Enables or disables TLS 1.3 <a href=https://tools.ietf.org/html/rfc8446#section-2.3>early data</a>, also known as Zero Round Trip Time Resumption (0-RTT).</p> <p>This requires <code>ssl-protocols</code> to have <code>TLSv1.3</code> enabled. Enable this with caution, because requests sent within early data are subject to <a href=https://tools.ietf.org/html/rfc8470>replay attacks</a>.</p> <p><a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_early_data>ssl_early_data</a>. The default is: <code>false</code>.</p> <h2 id=ssl-session-cache>ssl-session-cache<a class=headerlink href=#ssl-session-cache title="Permanent link"> ¶</a></h2> <p>Enables or disables the use of shared <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_cache>SSL cache</a> among worker processes.</p> <h2 id=ssl-session-cache-size>ssl-session-cache-size<a class=headerlink href=#ssl-session-cache-size title="Permanent link"> ¶</a></h2> <p>Sets the size of the <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_cache>SSL shared session cache</a> between all worker processes.</p> <h2 id=ssl-session-tickets>ssl-session-tickets<a class=headerlink href=#ssl-session-tickets title="Permanent link"> ¶</a></h2> <p>Enables or disables session resumption through <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_tickets>TLS session tickets</a>.</p> <h2 id=ssl-session-ticket-key>ssl-session-ticket-key<a class=headerlink href=#ssl-session-ticket-key title="Permanent link"> ¶</a></h2> <p>Sets the secret key used to encrypt and decrypt TLS session tickets. The value must be a valid base64 string. To create a ticket: <code>openssl rand 80 | openssl enc -A -base64</code></p> <p><a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_tickets>TLS session ticket-key</a>, by default, a randomly generated key is used.</p> <h2 id=ssl-session-timeout>ssl-session-timeout<a class=headerlink href=#ssl-session-timeout title="Permanent link"> ¶</a></h2> <p>Sets the time during which a client may <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_timeout>reuse the session</a> parameters stored in a cache.</p> <h2 id=ssl-buffer-size>ssl-buffer-size<a class=headerlink href=#ssl-buffer-size title="Permanent link"> ¶</a></h2> <p>Sets the size of the <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_buffer_size>SSL buffer</a> used for sending data. The default of 4k helps NGINX to improve TLS Time To First Byte (TTTFB).</p> <p><em>References:</em> <a href=https://www.igvita.com/2013/12/16/optimizing-nginx-tls-time-to-first-byte/ >https://www.igvita.com/2013/12/16/optimizing-nginx-tls-time-to-first-byte/</a></p> <h2 id=use-proxy-protocol>use-proxy-protocol<a class=headerlink href=#use-proxy-protocol title="Permanent link"> ¶</a></h2> <p>Enables or disables the <a href=https://www.nginx.com/resources/admin-guide/proxy-protocol/ >PROXY protocol</a> to receive client connection (real IP address) information passed through proxy servers and load balancers such as HAProxy and Amazon Elastic Load Balancer (ELB).</p> <h2 id=proxy-protocol-header-timeout>proxy-protocol-header-timeout<a class=headerlink href=#proxy-protocol-header-timeout title="Permanent link"> ¶</a></h2> <p>Sets the timeout value for receiving the proxy-protocol headers. The default of 5 seconds prevents the TLS passthrough handler from waiting indefinitely on a dropped connection. <em><strong>default:</strong></em> 5s</p> <h2 id=enable-aio-write>enable-aio-write<a class=headerlink href=#enable-aio-write title="Permanent link"> ¶</a></h2> <p>Enables or disables the directive <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#aio_write>aio_write</a> that writes files asynchronously. <em><strong>default:</strong></em> true</p> <h2 id=use-gzip>use-gzip<a class=headerlink href=#use-gzip title="Permanent link"> ¶</a></h2> <p>Enables or disables compression of HTTP responses using the <a href=https://nginx.org/en/docs/http/ngx_http_gzip_module.html>"gzip" module</a>. MIME types to compress are controlled by <a href=#gzip-types>gzip-types</a>. <em><strong>default:</strong></em> false</p> <h2 id=use-geoip>use-geoip<a class=headerlink href=#use-geoip title="Permanent link"> ¶</a></h2> <p>Enables or disables <a href=https://nginx.org/en/docs/http/ngx_http_geoip_module.html>"geoip" module</a> that creates variables with values depending on the client IP address, using the precompiled MaxMind databases. <em><strong>default:</strong></em> true</p> <blockquote> <p><strong>Note:</strong> MaxMind legacy databases are discontinued and will not receive updates after 2019-01-02, cf. <a href=https://support.maxmind.com/geolite-legacy-discontinuation-notice/ >discontinuation notice</a>. Consider <a href=#use-geoip2>use-geoip2</a> below.</p> </blockquote> <h2 id=use-geoip2>use-geoip2<a class=headerlink href=#use-geoip2 title="Permanent link"> ¶</a></h2> <p>Enables the <a href=https://github.com/leev/ngx_http_geoip2_module>geoip2 module</a> for NGINX. Since <code>0.27.0</code> and due to a <a href=https://blog.maxmind.com/2019/12/significant-changes-to-accessing-and-using-geolite2-databases/ >change in the MaxMind databases</a> a license is required to have access to the databases. For this reason, it is required to define a new flag <code>--maxmind-license-key</code> in the ingress controller deployment to download the databases needed during the initialization of the ingress controller. Alternatively, it is possible to use a volume to mount the files <code>/etc/ingress-controller/geoip/GeoLite2-City.mmdb</code> and <code>/etc/ingress-controller/geoip/GeoLite2-ASN.mmdb</code>, avoiding the overhead of the download.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>If the feature is enabled but the files are missing, GeoIP2 will not be enabled.</p> </div> <p><em><strong>default:</strong></em> false</p> <h2 id=geoip2-autoreload-in-minutes>geoip2-autoreload-in-minutes<a class=headerlink href=#geoip2-autoreload-in-minutes title="Permanent link"> ¶</a></h2> <p>Enables the <a href=https://github.com/leev/ngx_http_geoip2_module>geoip2 module</a> autoreload in MaxMind databases setting the interval in minutes.</p> <p><em><strong>default:</strong></em> 0</p> <h2 id=enable-brotli>enable-brotli<a class=headerlink href=#enable-brotli title="Permanent link"> ¶</a></h2> <p>Enables or disables compression of HTTP responses using the <a href=https://github.com/google/ngx_brotli>"brotli" module</a>. The default mime type list to compress is: <code>application/xml+rss application/atom+xml application/javascript application/x-javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/plain text/x-component</code>. <em><strong>default:</strong></em> false</p> <blockquote> <p><strong>Note:</strong> Brotli does not works in Safari &lt; 11. For more information see <a href="https://caniuse.com/#feat=brotli">https://caniuse.com/#feat=brotli</a></p> </blockquote> <h2 id=brotli-level>brotli-level<a class=headerlink href=#brotli-level title="Permanent link"> ¶</a></h2> <p>Sets the Brotli Compression Level that will be used. <em><strong>default:</strong></em> 4</p> <h2 id=brotli-min-length>brotli-min-length<a class=headerlink href=#brotli-min-length title="Permanent link"> ¶</a></h2> <p>Minimum length of responses, in bytes, that will be eligible for brotli compression. <em><strong>default:</strong></em> 20</p> <h2 id=brotli-types>brotli-types<a class=headerlink href=#brotli-types title="Permanent link"> ¶</a></h2> <p>Sets the MIME Types that will be compressed on-the-fly by brotli. <em><strong>default:</strong></em> <code>application/xml+rss application/atom+xml application/javascript application/x-javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/plain text/x-component</code></p> <h2 id=use-http2>use-http2<a class=headerlink href=#use-http2 title="Permanent link"> ¶</a></h2> <p>Enables or disables <a href=https://nginx.org/en/docs/http/ngx_http_v2_module.html>HTTP/2</a> support in secure connections.</p> <h2 id=gzip-disable>gzip-disable<a class=headerlink href=#gzip-disable title="Permanent link"> ¶</a></h2> <p>Disables <a href=https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_disable>gzipping</a> of responses for requests with "User-Agent" header fields matching any of the specified regular expressions.</p> <h2 id=gzip-level>gzip-level<a class=headerlink href=#gzip-level title="Permanent link"> ¶</a></h2> <p>Sets the gzip Compression Level that will be used. <em><strong>default:</strong></em> 1</p> <h2 id=gzip-min-length>gzip-min-length<a class=headerlink href=#gzip-min-length title="Permanent link"> ¶</a></h2> <p>Minimum length of responses to be returned to the client before it is eligible for gzip compression, in bytes. <em><strong>default:</strong></em> 256</p> <h2 id=gzip-types>gzip-types<a class=headerlink href=#gzip-types title="Permanent link"> ¶</a></h2> <p>Sets the MIME types in addition to "text/html" to compress. The special value "*" matches any MIME type. Responses with the "text/html" type are always compressed if <a href=#use-gzip><code>use-gzip</code></a> is enabled. <em><strong>default:</strong></em> <code>application/atom+xml application/javascript application/x-javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/plain text/x-component</code>.</p> <h2 id=worker-processes>worker-processes<a class=headerlink href=#worker-processes title="Permanent link"> ¶</a></h2> <p>Sets the number of <a href=https://nginx.org/en/docs/ngx_core_module.html#worker_processes>worker processes</a>. The default of "auto" means number of available CPU cores.</p> <h2 id=worker-cpu-affinity>worker-cpu-affinity<a class=headerlink href=#worker-cpu-affinity title="Permanent link"> ¶</a></h2> <p>Binds worker processes to the sets of CPUs. <a href=https://nginx.org/en/docs/ngx_core_module.html#worker_cpu_affinity>worker_cpu_affinity</a>. By default worker processes are not bound to any specific CPUs. The value can be:</p> <ul> <li>"": empty string indicate no affinity is applied.</li> <li>cpumask: e.g. <code>0001 0010 0100 1000</code> to bind processes to specific cpus.</li> <li>auto: binding worker processes automatically to available CPUs.</li> </ul> <h2 id=worker-shutdown-timeout>worker-shutdown-timeout<a class=headerlink href=#worker-shutdown-timeout title="Permanent link"> ¶</a></h2> <p>Sets a timeout for Nginx to <a href=https://nginx.org/en/docs/ngx_core_module.html#worker_shutdown_timeout>wait for worker to gracefully shutdown</a>. <em><strong>default:</strong></em> "240s"</p> <h2 id=load-balance>load-balance<a class=headerlink href=#load-balance title="Permanent link"> ¶</a></h2> <p>Sets the algorithm to use for load balancing. The value can either be:</p> <ul> <li>round_robin: to use the default round robin loadbalancer</li> <li>ewma: to use the Peak EWMA method for routing (<a href=https://github.com/kubernetes/ingress-nginx/blob/main/rootfs/etc/nginx/lua/balancer/ewma.lua>implementation</a>)</li> </ul> <p>The default is <code>round_robin</code>.</p> <ul> <li>To load balance using consistent hashing of IP or other variables, consider the <code>nginx.ingress.kubernetes.io/upstream-hash-by</code> annotation.</li> <li>To load balance using session cookies, consider the <code>nginx.ingress.kubernetes.io/affinity</code> annotation.</li> </ul> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/load_balancing.html>https://nginx.org/en/docs/http/load_balancing.html</a></p> <h2 id=variables-hash-bucket-size>variables-hash-bucket-size<a class=headerlink href=#variables-hash-bucket-size title="Permanent link"> ¶</a></h2> <p>Sets the bucket size for the variables hash table.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_map_module.html#map_hash_bucket_size>https://nginx.org/en/docs/http/ngx_http_map_module.html#map_hash_bucket_size</a></p> <h2 id=variables-hash-max-size>variables-hash-max-size<a class=headerlink href=#variables-hash-max-size title="Permanent link"> ¶</a></h2> <p>Sets the maximum size of the variables hash table.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_map_module.html#map_hash_max_size>https://nginx.org/en/docs/http/ngx_http_map_module.html#map_hash_max_size</a></p> <h2 id=upstream-keepalive-connections>upstream-keepalive-connections<a class=headerlink href=#upstream-keepalive-connections title="Permanent link"> ¶</a></h2> <p>Activates the cache for connections to upstream servers. The connections parameter sets the maximum number of idle keepalive connections to upstream servers that are preserved in the cache of each worker process. When this number is exceeded, the least recently used connections are closed. <em><strong>default:</strong></em> 320</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive>https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive</a></p> <h2 id=upstream-keepalive-time>upstream-keepalive-time<a class=headerlink href=#upstream-keepalive-time title="Permanent link"> ¶</a></h2> <p>Sets the maximum time during which requests can be processed through one keepalive connection. <em><strong>default:</strong></em> "1h"</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive_time>https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive_time</a></p> <h2 id=upstream-keepalive-timeout>upstream-keepalive-timeout<a class=headerlink href=#upstream-keepalive-timeout title="Permanent link"> ¶</a></h2> <p>Sets a timeout during which an idle keepalive connection to an upstream server will stay open. <em><strong>default:</strong></em> 60</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive_timeout>https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive_timeout</a></p> <h2 id=upstream-keepalive-requests>upstream-keepalive-requests<a class=headerlink href=#upstream-keepalive-requests title="Permanent link"> ¶</a></h2> <p>Sets the maximum number of requests that can be served through one keepalive connection. After the maximum number of requests is made, the connection is closed. <em><strong>default:</strong></em> 10000</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive_requests>https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive_requests</a></p> <h2 id=limit-conn-zone-variable>limit-conn-zone-variable<a class=headerlink href=#limit-conn-zone-variable title="Permanent link"> ¶</a></h2> <p>Sets parameters for a shared memory zone that will keep states for various keys of <a href=https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn_zone>limit_conn_zone</a>. The default of "$binary_remote_addr" variable’s size is always 4 bytes for IPv4 addresses or 16 bytes for IPv6 addresses.</p> <h2 id=proxy-stream-timeout>proxy-stream-timeout<a class=headerlink href=#proxy-stream-timeout title="Permanent link"> ¶</a></h2> <p>Sets the timeout between two successive read or write operations on client or proxied server connections. If no data is transmitted within this time, the connection is closed.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_timeout>https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_timeout</a></p> <h2 id=proxy-stream-next-upstream>proxy-stream-next-upstream<a class=headerlink href=#proxy-stream-next-upstream title="Permanent link"> ¶</a></h2> <p>When a connection to the proxied server cannot be established, determines whether a client connection will be passed to the next server.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_next_upstream>https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_next_upstream</a></p> <h2 id=proxy-stream-next-upstream-timeout>proxy-stream-next-upstream-timeout<a class=headerlink href=#proxy-stream-next-upstream-timeout title="Permanent link"> ¶</a></h2> <p>Limits the time allowed to pass a connection to the next server. The 0 value turns off this limitation.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_next_upstream_timeout>https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_next_upstream_timeout</a></p> <h2 id=proxy-stream-next-upstream-tries>proxy-stream-next-upstream-tries<a class=headerlink href=#proxy-stream-next-upstream-tries title="Permanent link"> ¶</a></h2> <p>Limits the number of possible tries a request should be passed to the next server. The 0 value turns off this limitation.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_next_upstream_timeout>https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_next_upstream_tries</a></p> <h2 id=proxy-stream-responses>proxy-stream-responses<a class=headerlink href=#proxy-stream-responses title="Permanent link"> ¶</a></h2> <p>Sets the number of datagrams expected from the proxied server in response to the client request if the UDP protocol is used.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_responses>https://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_responses</a></p> <h2 id=bind-address>bind-address<a class=headerlink href=#bind-address title="Permanent link"> ¶</a></h2> <p>Sets the addresses on which the server will accept requests instead of *. It should be noted that these addresses must exist in the runtime environment or the controller will crash loop.</p> <h2 id=use-forwarded-headers>use-forwarded-headers<a class=headerlink href=#use-forwarded-headers title="Permanent link"> ¶</a></h2> <p>If true, NGINX passes the incoming <code>X-Forwarded-*</code> headers to upstreams. Use this option when NGINX is behind another L7 proxy / load balancer that is setting these headers.</p> <p>If false, NGINX ignores incoming <code>X-Forwarded-*</code> headers, filling them with the request information it sees. Use this option if NGINX is exposed directly to the internet, or it's behind a L3/packet-based load balancer that doesn't alter the source IP in the packets.</p> <h2 id=enable-real-ip>enable-real-ip<a class=headerlink href=#enable-real-ip title="Permanent link"> ¶</a></h2> <p><code>enable-real-ip</code> enables the configuration of <a href=https://nginx.org/en/docs/http/ngx_http_realip_module.html>https://nginx.org/en/docs/http/ngx_http_realip_module.html</a>. Specific attributes of the module can be configured further by using <code>forwarded-for-header</code> and <code>proxy-real-ip-cidr</code> settings.</p> <h2 id=forwarded-for-header>forwarded-for-header<a class=headerlink href=#forwarded-for-header title="Permanent link"> ¶</a></h2> <p>Sets the header field for identifying the originating IP address of a client. <em><strong>default:</strong></em> X-Forwarded-For</p> <h2 id=forwarded-for-proxy-protocol-header>forwarded-for-proxy-protocol-header<a class=headerlink href=#forwarded-for-proxy-protocol-header title="Permanent link"> ¶</a></h2> <p>Sets the name of the intermediate header used to determine the client's originating IP when both <code>use-proxy-protocol</code> and <code>use-forwarded-headers</code> are enabled. This doesn't impact functionality and should not typically be modified. <em><strong>default:</strong></em> X-Forwarded-For-Proxy-Protocol</p> <h2 id=compute-full-forwarded-for>compute-full-forwarded-for<a class=headerlink href=#compute-full-forwarded-for title="Permanent link"> ¶</a></h2> <p>Append the remote address to the X-Forwarded-For header instead of replacing it. When this option is enabled, the upstream application is responsible for extracting the client IP based on its own list of trusted proxies.</p> <h2 id=proxy-add-original-uri-header>proxy-add-original-uri-header<a class=headerlink href=#proxy-add-original-uri-header title="Permanent link"> ¶</a></h2> <p>Adds an X-Original-Uri header with the original request URI to the backend request</p> <h2 id=generate-request-id>generate-request-id<a class=headerlink href=#generate-request-id title="Permanent link"> ¶</a></h2> <p>Ensures that X-Request-ID is defaulted to a random value, if no X-Request-ID is present in the request</p> <h2 id=jaeger-collector-host>jaeger-collector-host<a class=headerlink href=#jaeger-collector-host title="Permanent link"> ¶</a></h2> <p>Specifies the host to use when uploading traces. It must be a valid URL.</p> <h2 id=jaeger-collector-port>jaeger-collector-port<a class=headerlink href=#jaeger-collector-port title="Permanent link"> ¶</a></h2> <p>Specifies the port to use when uploading traces. <em><strong>default:</strong></em> 6831</p> <h2 id=jaeger-endpoint>jaeger-endpoint<a class=headerlink href=#jaeger-endpoint title="Permanent link"> ¶</a></h2> <p>Specifies the endpoint to use when uploading traces to a collector. This takes priority over <code>jaeger-collector-host</code> if both are specified.</p> <h2 id=jaeger-service-name>jaeger-service-name<a class=headerlink href=#jaeger-service-name title="Permanent link"> ¶</a></h2> <p>Specifies the service name to use for any traces created. <em><strong>default:</strong></em> nginx</p> <h2 id=jaeger-propagation-format>jaeger-propagation-format<a class=headerlink href=#jaeger-propagation-format title="Permanent link"> ¶</a></h2> <p>Specifies the traceparent/tracestate propagation format. <em><strong>default:</strong></em> jaeger</p> <h2 id=jaeger-sampler-type>jaeger-sampler-type<a class=headerlink href=#jaeger-sampler-type title="Permanent link"> ¶</a></h2> <p>Specifies the sampler to be used when sampling traces. The available samplers are: const, probabilistic, ratelimiting, remote. <em><strong>default:</strong></em> const</p> <h2 id=jaeger-sampler-param>jaeger-sampler-param<a class=headerlink href=#jaeger-sampler-param title="Permanent link"> ¶</a></h2> <p>Specifies the argument to be passed to the sampler constructor. Must be a number. For const this should be 0 to never sample and 1 to always sample. <em><strong>default:</strong></em> 1</p> <h2 id=jaeger-sampler-host>jaeger-sampler-host<a class=headerlink href=#jaeger-sampler-host title="Permanent link"> ¶</a></h2> <p>Specifies the custom remote sampler host to be passed to the sampler constructor. Must be a valid URL. Leave blank to use default value (localhost). <em><strong>default:</strong></em> http://127.0.0.1</p> <h2 id=jaeger-sampler-port>jaeger-sampler-port<a class=headerlink href=#jaeger-sampler-port title="Permanent link"> ¶</a></h2> <p>Specifies the custom remote sampler port to be passed to the sampler constructor. Must be a number. <em><strong>default:</strong></em> 5778</p> <h2 id=jaeger-trace-context-header-name>jaeger-trace-context-header-name<a class=headerlink href=#jaeger-trace-context-header-name title="Permanent link"> ¶</a></h2> <p>Specifies the header name used for passing trace context. <em><strong>default:</strong></em> uber-trace-id</p> <h2 id=jaeger-debug-header>jaeger-debug-header<a class=headerlink href=#jaeger-debug-header title="Permanent link"> ¶</a></h2> <p>Specifies the header name used for force sampling. <em><strong>default:</strong></em> jaeger-debug-id</p> <h2 id=jaeger-baggage-header>jaeger-baggage-header<a class=headerlink href=#jaeger-baggage-header title="Permanent link"> ¶</a></h2> <p>Specifies the header name used to submit baggage if there is no root span. <em><strong>default:</strong></em> jaeger-baggage</p> <h2 id=jaeger-tracer-baggage-header-prefix>jaeger-tracer-baggage-header-prefix<a class=headerlink href=#jaeger-tracer-baggage-header-prefix title="Permanent link"> ¶</a></h2> <p>Specifies the header prefix used to propagate baggage. <em><strong>default:</strong></em> uberctx-</p> <h2 id=enable-opentelemetry>enable-opentelemetry<a class=headerlink href=#enable-opentelemetry title="Permanent link"> ¶</a></h2> <p>Enables the nginx OpenTelemetry extension. <em><strong>default:</strong></em> is disabled</p> <p><em>References:</em> <a href=https://github.com/open-telemetry/opentelemetry-cpp-contrib/tree/main/instrumentation/nginx>https://github.com/open-telemetry/opentelemetry-cpp-contrib</a></p> <h2 id=opentelemetry-operation-name>opentelemetry-operation-name<a class=headerlink href=#opentelemetry-operation-name title="Permanent link"> ¶</a></h2> <p>Specifies a custom name for the server span. <em><strong>default:</strong></em> is empty</p> <p>For example, set to "HTTP $request_method $uri".</p> <h2 id=opentelemetry-config>opentelemetry-config<a class=headerlink href=#opentelemetry-config title="Permanent link"> ¶</a></h2> <p>Sets the opentelemetry config file. <em><strong>default:</strong></em> /etc/ingress-controller/telemetry/opentelemetry.toml</p> <h2 id=otlp-collector-host>otlp-collector-host<a class=headerlink href=#otlp-collector-host title="Permanent link"> ¶</a></h2> <p>Specifies the host to use when uploading traces. It must be a valid URL.</p> <h2 id=otlp-collector-port>otlp-collector-port<a class=headerlink href=#otlp-collector-port title="Permanent link"> ¶</a></h2> <p>Specifies the port to use when uploading traces. <em><strong>default:</strong></em> 4317</p> <h2 id=otel-service-name>otel-service-name<a class=headerlink href=#otel-service-name title="Permanent link"> ¶</a></h2> <p>Specifies the service name to use for any traces created. <em><strong>default:</strong></em> nginx</p> <h2 id=opentelemetry-trust-incoming-span>opentelemetry-trust-incoming-span<a class=headerlink href=#opentelemetry-trust-incoming-span title="Permanent link"> ¶</a></h2> <p>Enables or disables using spans from incoming requests as parent for created ones. <em><strong>default:</strong></em> true</p> <h2 id=otel-sampler-parent-based>otel-sampler-parent-based<a class=headerlink href=#otel-sampler-parent-based title="Permanent link"> ¶</a></h2> <p>Uses sampler implementation which by default will take a sample if parent Activity is sampled. <em><strong>default:</strong></em> true</p> <h2 id=otel-sampler-ratio>otel-sampler-ratio<a class=headerlink href=#otel-sampler-ratio title="Permanent link"> ¶</a></h2> <p>Specifies sample rate for any traces created. <em><strong>default:</strong></em> 0.01</p> <h2 id=otel-sampler>otel-sampler<a class=headerlink href=#otel-sampler title="Permanent link"> ¶</a></h2> <p>Specifies the sampler to be used when sampling traces. The available samplers are: AlwaysOff, AlwaysOn, TraceIdRatioBased, remote. <em><strong>default:</strong></em> AlwaysOn</p> <h2 id=main-snippet>main-snippet<a class=headerlink href=#main-snippet title="Permanent link"> ¶</a></h2> <p>Adds custom configuration to the main section of the nginx configuration.</p> <h2 id=http-snippet>http-snippet<a class=headerlink href=#http-snippet title="Permanent link"> ¶</a></h2> <p>Adds custom configuration to the http section of the nginx configuration.</p> <h2 id=server-snippet>server-snippet<a class=headerlink href=#server-snippet title="Permanent link"> ¶</a></h2> <p>Adds custom configuration to all the servers in the nginx configuration.</p> <h2 id=stream-snippet>stream-snippet<a class=headerlink href=#stream-snippet title="Permanent link"> ¶</a></h2> <p>Adds custom configuration to the stream section of the nginx configuration.</p> <h2 id=location-snippet>location-snippet<a class=headerlink href=#location-snippet title="Permanent link"> ¶</a></h2> <p>Adds custom configuration to all the locations in the nginx configuration.</p> <p>You can not use this to add new locations that proxy to the Kubernetes pods, as the snippet does not have access to the Go template functions. If you want to add custom locations you will have to <a href=https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/custom-template/ >provide your own nginx.tmpl</a>.</p> <h2 id=custom-http-errors>custom-http-errors<a class=headerlink href=#custom-http-errors title="Permanent link"> ¶</a></h2> <p>Enables which HTTP codes should be passed for processing with the <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#error_page>error_page directive</a></p> <p>Setting at least one code also enables <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_intercept_errors>proxy_intercept_errors</a> which are required to process error_page.</p> <p>Example usage: <code>custom-http-errors: 404,415</code></p> <h2 id=proxy-body-size>proxy-body-size<a class=headerlink href=#proxy-body-size title="Permanent link"> ¶</a></h2> <p>Sets the maximum allowed size of the client request body. See NGINX <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size>client_max_body_size</a>.</p> <h2 id=proxy-connect-timeout>proxy-connect-timeout<a class=headerlink href=#proxy-connect-timeout title="Permanent link"> ¶</a></h2> <p>Sets the timeout for <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_connect_timeout>establishing a connection with a proxied server</a>. It should be noted that this timeout cannot usually exceed 75 seconds.</p> <p>It will also set the <a href=https://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_connect_timeout>grpc_connect_timeout</a> for gRPC connections.</p> <h2 id=proxy-read-timeout>proxy-read-timeout<a class=headerlink href=#proxy-read-timeout title="Permanent link"> ¶</a></h2> <p>Sets the timeout in seconds for <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout>reading a response from the proxied server</a>. The timeout is set only between two successive read operations, not for the transmission of the whole response.</p> <p>It will also set the <a href=https://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_read_timeout>grpc_read_timeout</a> for gRPC connections.</p> <h2 id=proxy-send-timeout>proxy-send-timeout<a class=headerlink href=#proxy-send-timeout title="Permanent link"> ¶</a></h2> <p>Sets the timeout in seconds for <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_send_timeout>transmitting a request to the proxied server</a>. The timeout is set only between two successive write operations, not for the transmission of the whole request.</p> <p>It will also set the <a href=https://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_send_timeout>grpc_send_timeout</a> for gRPC connections.</p> <h2 id=proxy-buffers-number>proxy-buffers-number<a class=headerlink href=#proxy-buffers-number title="Permanent link"> ¶</a></h2> <p>Sets the number of the buffer used for <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffers>reading the first part of the response</a> received from the proxied server. This part usually contains a small response header.</p> <h2 id=proxy-buffer-size>proxy-buffer-size<a class=headerlink href=#proxy-buffer-size title="Permanent link"> ¶</a></h2> <p>Sets the size of the buffer used for <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size>reading the first part of the response</a> received from the proxied server. This part usually contains a small response header.</p> <h2 id=proxy-busy-buffers-size>proxy-busy-buffers-size<a class=headerlink href=#proxy-busy-buffers-size title="Permanent link"> ¶</a></h2> <p><a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_busy_buffers_size>Limits the total size of buffers that can be busy</a> sending a response to the client while the response is not yet fully read.</p> <h2 id=proxy-cookie-path>proxy-cookie-path<a class=headerlink href=#proxy-cookie-path title="Permanent link"> ¶</a></h2> <p>Sets a text that <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cookie_path>should be changed in the path attribute</a> of the “Set-Cookie” header fields of a proxied server response.</p> <h2 id=proxy-cookie-domain>proxy-cookie-domain<a class=headerlink href=#proxy-cookie-domain title="Permanent link"> ¶</a></h2> <p>Sets a text that <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cookie_domain>should be changed in the domain attribute</a> of the “Set-Cookie” header fields of a proxied server response.</p> <h2 id=proxy-next-upstream>proxy-next-upstream<a class=headerlink href=#proxy-next-upstream title="Permanent link"> ¶</a></h2> <p>Specifies in <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream>which cases</a> a request should be passed to the next server.</p> <h2 id=proxy-next-upstream-timeout>proxy-next-upstream-timeout<a class=headerlink href=#proxy-next-upstream-timeout title="Permanent link"> ¶</a></h2> <p><a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream_timeout>Limits the time</a> in seconds during which a request can be passed to the next server.</p> <h2 id=proxy-next-upstream-tries>proxy-next-upstream-tries<a class=headerlink href=#proxy-next-upstream-tries title="Permanent link"> ¶</a></h2> <p>Limit the number of <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream_tries>possible tries</a> a request should be passed to the next server.</p> <h2 id=proxy-redirect-from>proxy-redirect-from<a class=headerlink href=#proxy-redirect-from title="Permanent link"> ¶</a></h2> <p>Sets the original text that should be changed in the "Location" and "Refresh" header fields of a proxied server response. <em><strong>default:</strong></em> off</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_redirect>https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_redirect</a></p> <h2 id=proxy-request-buffering>proxy-request-buffering<a class=headerlink href=#proxy-request-buffering title="Permanent link"> ¶</a></h2> <p>Enables or disables <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_request_buffering>buffering of a client request body</a>.</p> <h2 id=ssl-redirect>ssl-redirect<a class=headerlink href=#ssl-redirect title="Permanent link"> ¶</a></h2> <p>Sets the global value of redirects (301) to HTTPS if the server has a TLS certificate (defined in an Ingress rule). <em><strong>default:</strong></em> "true"</p> <h2 id=force-ssl-redirect>force-ssl-redirect<a class=headerlink href=#force-ssl-redirect title="Permanent link"> ¶</a></h2> <p>Sets the global value of redirects (308) to HTTPS if the server has a default TLS certificate (defined in extra-args). <em><strong>default:</strong></em> "false"</p> <h2 id=denylist-source-range>denylist-source-range<a class=headerlink href=#denylist-source-range title="Permanent link"> ¶</a></h2> <p>Sets the default denylisted IPs for each <code>server</code> block. This can be overwritten by an annotation on an Ingress rule. See <a href=https://nginx.org/en/docs/http/ngx_http_access_module.html>ngx_http_access_module</a>.</p> <h2 id=whitelist-source-range>whitelist-source-range<a class=headerlink href=#whitelist-source-range title="Permanent link"> ¶</a></h2> <p>Sets the default whitelisted IPs for each <code>server</code> block. This can be overwritten by an annotation on an Ingress rule. See <a href=https://nginx.org/en/docs/http/ngx_http_access_module.html>ngx_http_access_module</a>.</p> <h2 id=skip-access-log-urls>skip-access-log-urls<a class=headerlink href=#skip-access-log-urls title="Permanent link"> ¶</a></h2> <p>Sets a list of URLs that should not appear in the NGINX access log. This is useful with urls like <code>/health</code> or <code>health-check</code> that make "complex" reading the logs. <em><strong>default:</strong></em> is empty</p> <h2 id=limit-rate>limit-rate<a class=headerlink href=#limit-rate title="Permanent link"> ¶</a></h2> <p>Limits the rate of response transmission to a client. The rate is specified in bytes per second. The zero value disables rate limiting. The limit is set per a request, and so if a client simultaneously opens two connections, the overall rate will be twice as much as the specified limit.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate>https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate</a></p> <h2 id=limit-rate-after>limit-rate-after<a class=headerlink href=#limit-rate-after title="Permanent link"> ¶</a></h2> <p>Sets the initial amount after which the further transmission of a response to a client will be rate limited.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate_after>https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate_after</a></p> <h2 id=lua-shared-dicts>lua-shared-dicts<a class=headerlink href=#lua-shared-dicts title="Permanent link"> ¶</a></h2> <p>Customize default Lua shared dictionaries or define more. You can use the following syntax to do so:</p> <div class=highlight><pre><span></span><code>lua-shared-dicts: &quot;&lt;my dict name&gt;: &lt;my dict size&gt;, [&lt;my dict name&gt;: &lt;my dict size&gt;], ...&quot;
</code></pre></div> <p>For example following will set default <code>certificate_data</code> dictionary to <code>100M</code> and will introduce a new dictionary called <code>my_custom_plugin</code>:</p> <div class=highlight><pre><span></span><code>lua-shared-dicts: &quot;certificate_data: 100, my_custom_plugin: 5&quot;
</code></pre></div> <p>You can optionally set a size unit to allow for kilobyte-granularity. Allowed units are 'm' or 'k' (case-insensitive), and it defaults to MB if no unit is provided. Here is a similar example, but the <code>my_custom_plugin</code> dict is only 512KB.</p> <div class=highlight><pre><span></span><code>lua-shared-dicts: &quot;certificate_data: 100, my_custom_plugin: 512k&quot;
</code></pre></div> <h2 id=http-redirect-code>http-redirect-code<a class=headerlink href=#http-redirect-code title="Permanent link"> ¶</a></h2> <p>Sets the HTTP status code to be used in redirects. Supported codes are <a href=https://developer.mozilla.org/docs/Web/HTTP/Status/301>301</a>,<a href=https://developer.mozilla.org/docs/Web/HTTP/Status/302>302</a>,<a href=https://developer.mozilla.org/docs/Web/HTTP/Status/307>307</a> and <a href=https://developer.mozilla.org/docs/Web/HTTP/Status/308>308</a> <em><strong>default:</strong></em> 308</p> <blockquote> <p><strong>Why the default code is 308?</strong></p> <p><a href=https://tools.ietf.org/html/rfc7238>RFC 7238</a> was created to define the 308 (Permanent Redirect) status code that is similar to 301 (Moved Permanently) but it keeps the payload in the redirect. This is important if we send a redirect in methods like POST.</p> </blockquote> <h2 id=proxy-buffering>proxy-buffering<a class=headerlink href=#proxy-buffering title="Permanent link"> ¶</a></h2> <p>Enables or disables <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering>buffering of responses from the proxied server</a>.</p> <h2 id=limit-req-status-code>limit-req-status-code<a class=headerlink href=#limit-req-status-code title="Permanent link"> ¶</a></h2> <p>Sets the <a href=https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_status>status code to return in response to rejected requests</a>. <em><strong>default:</strong></em> 503</p> <h2 id=limit-conn-status-code>limit-conn-status-code<a class=headerlink href=#limit-conn-status-code title="Permanent link"> ¶</a></h2> <p>Sets the <a href=https://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn_status>status code to return in response to rejected connections</a>. <em><strong>default:</strong></em> 503</p> <h2 id=enable-syslog>enable-syslog<a class=headerlink href=#enable-syslog title="Permanent link"> ¶</a></h2> <p>Enable <a href=https://nginx.org/en/docs/syslog.html>syslog</a> feature for access log and error log. <em><strong>default:</strong></em> false</p> <h2 id=syslog-host>syslog-host<a class=headerlink href=#syslog-host title="Permanent link"> ¶</a></h2> <p>Sets the address of syslog server. The address can be specified as a domain name or IP address.</p> <h2 id=syslog-port>syslog-port<a class=headerlink href=#syslog-port title="Permanent link"> ¶</a></h2> <p>Sets the port of syslog server. <em><strong>default:</strong></em> 514</p> <h2 id=no-tls-redirect-locations>no-tls-redirect-locations<a class=headerlink href=#no-tls-redirect-locations title="Permanent link"> ¶</a></h2> <p>A comma-separated list of locations on which http requests will never get redirected to their https counterpart. <em><strong>default:</strong></em> "/.well-known/acme-challenge"</p> <h2 id=global-allowed-response-headers>global-allowed-response-headers<a class=headerlink href=#global-allowed-response-headers title="Permanent link"> ¶</a></h2> <p>A comma-separated list of allowed response headers inside the <a href=https://github.com/kubernetes/ingress-nginx/blob/main/docs/user-guide/nginx-configuration/annotations.md#custom-headers>custom headers annotations</a></p> <h2 id=global-auth-url>global-auth-url<a class=headerlink href=#global-auth-url title="Permanent link"> ¶</a></h2> <p>A url to an existing service that provides authentication for all the locations. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/auth-url</code>. Locations that should not get authenticated can be listed using <code>no-auth-locations</code> See <a href=#no-auth-locations>no-auth-locations</a>. In addition, each service can be excluded from authentication via annotation <code>enable-global-auth</code> set to "false". <em><strong>default:</strong></em> ""</p> <p><em>References:</em> <a href=https://github.com/kubernetes/ingress-nginx/blob/main/docs/user-guide/nginx-configuration/annotations.md#external-authentication>https://github.com/kubernetes/ingress-nginx/blob/main/docs/user-guide/nginx-configuration/annotations.md#external-authentication</a></p> <h2 id=global-auth-method>global-auth-method<a class=headerlink href=#global-auth-method title="Permanent link"> ¶</a></h2> <p>A HTTP method to use for an existing service that provides authentication for all the locations. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/auth-method</code>. <em><strong>default:</strong></em> ""</p> <h2 id=global-auth-signin>global-auth-signin<a class=headerlink href=#global-auth-signin title="Permanent link"> ¶</a></h2> <p>Sets the location of the error page for an existing service that provides authentication for all the locations. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/auth-signin</code>. <em><strong>default:</strong></em> ""</p> <h2 id=global-auth-signin-redirect-param>global-auth-signin-redirect-param<a class=headerlink href=#global-auth-signin-redirect-param title="Permanent link"> ¶</a></h2> <p>Sets the query parameter in the error page signin URL which contains the original URL of the request that failed authentication. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/auth-signin-redirect-param</code>. <em><strong>default:</strong></em> "rd"</p> <h2 id=global-auth-response-headers>global-auth-response-headers<a class=headerlink href=#global-auth-response-headers title="Permanent link"> ¶</a></h2> <p>Sets the headers to pass to backend once authentication request completes. Applied to all the locations. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/auth-response-headers</code>. <em><strong>default:</strong></em> ""</p> <h2 id=global-auth-request-redirect>global-auth-request-redirect<a class=headerlink href=#global-auth-request-redirect title="Permanent link"> ¶</a></h2> <p>Sets the X-Auth-Request-Redirect header value. Applied to all the locations. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/auth-request-redirect</code>. <em><strong>default:</strong></em> ""</p> <h2 id=global-auth-snippet>global-auth-snippet<a class=headerlink href=#global-auth-snippet title="Permanent link"> ¶</a></h2> <p>Sets a custom snippet to use with external authentication. Applied to all the locations. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/auth-snippet</code>. <em><strong>default:</strong></em> ""</p> <h2 id=global-auth-cache-key>global-auth-cache-key<a class=headerlink href=#global-auth-cache-key title="Permanent link"> ¶</a></h2> <p>Enables caching for global auth requests. Specify a lookup key for auth responses, e.g. <code>$remote_user$http_authorization</code>.</p> <h2 id=global-auth-cache-duration>global-auth-cache-duration<a class=headerlink href=#global-auth-cache-duration title="Permanent link"> ¶</a></h2> <p>Set a caching time for auth responses based on their response codes, e.g. <code>200 202 30m</code>. See <a href=https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_valid>proxy_cache_valid</a> for details. You may specify multiple, comma-separated values: <code>200 202 10m, 401 5m</code>. defaults to <code>200 202 401 5m</code>.</p> <h2 id=global-auth-always-set-cookie>global-auth-always-set-cookie<a class=headerlink href=#global-auth-always-set-cookie title="Permanent link"> ¶</a></h2> <p>Always set a cookie returned by auth request. By default, the cookie will be set only if an upstream reports with the code 200, 201, 204, 206, 301, 302, 303, 304, 307, or 308. <em><strong>default:</strong></em> false</p> <h2 id=no-auth-locations>no-auth-locations<a class=headerlink href=#no-auth-locations title="Permanent link"> ¶</a></h2> <p>A comma-separated list of locations that should not get authenticated. <em><strong>default:</strong></em> "/.well-known/acme-challenge"</p> <h2 id=block-cidrs>block-cidrs<a class=headerlink href=#block-cidrs title="Permanent link"> ¶</a></h2> <p>A comma-separated list of IP addresses (or subnets), request from which have to be blocked globally.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_access_module.html#deny>https://nginx.org/en/docs/http/ngx_http_access_module.html#deny</a></p> <h2 id=block-user-agents>block-user-agents<a class=headerlink href=#block-user-agents title="Permanent link"> ¶</a></h2> <p>A comma-separated list of User-Agent, request from which have to be blocked globally. It's possible to use here full strings and regular expressions. More details about valid patterns can be found at <code>map</code> Nginx directive documentation.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_map_module.html#map>https://nginx.org/en/docs/http/ngx_http_map_module.html#map</a></p> <h2 id=block-referers>block-referers<a class=headerlink href=#block-referers title="Permanent link"> ¶</a></h2> <p>A comma-separated list of Referers, request from which have to be blocked globally. It's possible to use here full strings and regular expressions. More details about valid patterns can be found at <code>map</code> Nginx directive documentation.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_map_module.html#map>https://nginx.org/en/docs/http/ngx_http_map_module.html#map</a></p> <h2 id=proxy-ssl-location-only>proxy-ssl-location-only<a class=headerlink href=#proxy-ssl-location-only title="Permanent link"> ¶</a></h2> <p>Set if proxy-ssl parameters should be applied only on locations and not on servers. <em><strong>default:</strong></em> is disabled</p> <h2 id=default-type>default-type<a class=headerlink href=#default-type title="Permanent link"> ¶</a></h2> <p>Sets the default MIME type of a response. <em><strong>default:</strong></em> text/html</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#default_type>https://nginx.org/en/docs/http/ngx_http_core_module.html#default_type</a></p> <h2 id=service-upstream>service-upstream<a class=headerlink href=#service-upstream title="Permanent link"> ¶</a></h2> <p>Set if the service's Cluster IP and port should be used instead of a list of all endpoints. This can be overwritten by an annotation on an Ingress rule. <em><strong>default:</strong></em> "false"</p> <h2 id=ssl-reject-handshake>ssl-reject-handshake<a class=headerlink href=#ssl-reject-handshake title="Permanent link"> ¶</a></h2> <p>Set to reject SSL handshake to an unknown virtualhost. This parameter helps to mitigate the fingerprinting using default certificate of ingress. <em><strong>default:</strong></em> "false"</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_reject_handshake>https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_reject_handshake</a></p> <h2 id=debug-connections>debug-connections<a class=headerlink href=#debug-connections title="Permanent link"> ¶</a></h2> <p>Enables debugging log for selected client connections. <em><strong>default:</strong></em> ""</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/ngx_core_module.html#debug_connection>https://nginx.org/en/docs/ngx_core_module.html#debug_connection</a></p> <h2 id=strict-validate-path-type>strict-validate-path-type<a class=headerlink href=#strict-validate-path-type title="Permanent link"> ¶</a></h2> <p>Ingress objects contains a field called pathType that defines the proxy behavior. It can be <code>Exact</code>, <code>Prefix</code> and <code>ImplementationSpecific</code>.</p> <p>When pathType is configured as <code>Exact</code> or <code>Prefix</code>, there should be a more strict validation, allowing only paths starting with "/" and containing only alphanumeric characters and "-", "_" and additional "/".</p> <p>When this option is enabled, the validation will happen on the Admission Webhook, making any Ingress not using pathType <code>ImplementationSpecific</code> and containing invalid characters to be denied.</p> <p>This means that Ingress objects that rely on paths containing regex characters should use <code>ImplementationSpecific</code> pathType.</p> <p>The cluster admin should establish validation rules using mechanisms like <a href=https://www.openpolicyagent.org/ >Open Policy Agent</a> to validate that only authorized users can use <code>ImplementationSpecific</code> pathType and that only the authorized characters can be used.</p> <p><em><strong>default:</strong></em> "true"</p> <h2 id=grpc-buffer-size-kb>grpc-buffer-size-kb<a class=headerlink href=#grpc-buffer-size-kb title="Permanent link"> ¶</a></h2> <p>Sets the configuration for the GRPC Buffer Size parameter. If not set it will use the default from NGINX.</p> <p><em>References:</em> <a href=https://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_buffer_size>https://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_buffer_size</a></p> <h2 id=relative-redirects>relative-redirects<a class=headerlink href=#relative-redirects title="Permanent link"> ¶</a></h2> <p>Use relative redirects instead of absolute redirects. Absolute redirects are the default in nginx. RFC7231 allows relative redirects since 2014. Similar to the Ingress rule annotation <code>nginx.ingress.kubernetes.io/relative-redirects</code>.</p> <p><em><strong>default:</strong></em> "false"</p> <p><em>References:</em> - <a href=https://nginx.org/en/docs/http/ngx_http_core_module.html#absolute_redirect>https://nginx.org/en/docs/http/ngx_http_core_module.html#absolute_redirect</a> - <a href=https://datatracker.ietf.org/doc/html/rfc7231#section-7.1.2>https://datatracker.ietf.org/doc/html/rfc7231#section-7.1.2</a></p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.sections", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.50899def.min.js></script> </body> </html>